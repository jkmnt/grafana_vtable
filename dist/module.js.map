{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"emotion\"","webpack:///external \"@grafana/ui\"","webpack:///external \"@grafana/data\"","webpack:///external \"react\"","webpack:///external \"@grafana/runtime\"","webpack:///external \"moment\"","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///./grid.ts","webpack:///./styles.ts","webpack:///./utils.ts","webpack:///./vtable.ts","webpack:///./module.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__assign","assign","arguments","length","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__read","ar","error","__spread","concat","__makeTemplateObject","cooked","raw","calc_sizes","spec","defsize","sizes","Array","fill","VGrid","groups","opts","cells","ncols","find","fields","values","nrows","forEach","new_style","props","style","cloneElement","gtcs","colws","gtrs","rowhs","join","children","HGrid","any_labels","cell","createElement","build_classes","prefix","with_aligns","field","dimfield","grouplabel","grid","base","build_vstyle","build_common_style","sticky","bborder","scrollbars","dim","hl","border_bg","tborder","rborder","lborder","sticky_bg","build_hstyle","theme","normal_opts","transparent_opts","CLASSES","colors","textSemiWeak","textBlue","panelBg","border1","dashboardBg","get_colspecs","maxcols","str","size","re","specs","split","map","match","a","undefined","w","Number","parseInt","len","parse_colspec","rce","create_field","options","ctx","color","df","formatter","order","field_name","display","common_unit","show_common_unit","type","number","saved_mappings","config","mappings","unit","suffix","discover_unit","className","nameclass","dv","text","custom","display_mode","html","get_valueclass","dangerouslySetInnerHTML","__html","create_gridgroups","gss","aligns","field_idx","is_dimension","fieldstyle","get_fieldstyle","is_horizontal","get_nameclass","field_style","get_order","sort","ordermap","toArray","zeronull","b","nullfirst","desc","num_comparer","str_comparer","suggestions","kind","Field","Property","Constant","JsEditor","onChange","onBlur","onSave","language","showMiniMap","showLineNumbers","getSuggestions","height","context","data","filter","entries","labels","k","includes","width","transparent","series","horizontal","field_prefix","align","get_style","Math","max","estimate_maxcols","colspecs","custom_columns","disableSanitizeHtml","use_formatcode","formatcode","Function","moment","gridgroups","is_dim","Map","set","lab","has","fields_to_groups","dimension_field","group_by_label","setPanelOptions","builder","addSelect","path","settings","allowCustomValue","getOptions","defaultValue","addBooleanSwitch","addTextInput","description","category","addCustomEditor","id","showIf","editor","useFieldConfig","useCustomConfig","addRadio"],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import React from 'react';\r\n\r\nexport interface GridField {\r\n    values: React.ReactElement[];\r\n}\r\n\r\nexport interface GridGroup {\r\n    label?: React.ReactElement;\r\n    fields: GridField[];\r\n}\r\n\r\nexport interface GridOptions {\r\n    colws?: number[];\r\n    rowhs?: number[];\r\n}\r\n\r\nfunction calc_sizes(spec: number[] | undefined, n: number, defsize: string) {\r\n    const sizes = Array(n).fill(defsize);\r\n\r\n    if (! (spec && spec.length)) return sizes;\r\n\r\n    for (var i = 0; i < n; i++) {\r\n        const v = spec[i];\r\n        if (v && v > 0)\r\n            sizes[i] = `${v}px`;\r\n    }\r\n\r\n    return sizes;\r\n}\r\n\r\nexport function VGrid(groups: GridGroup[], opts: GridOptions = {}) {\r\n\r\n    const cells: React.ReactNode[] = [];\r\n    const ncols = groups.find(g => g.fields.length)?.fields[0].values.length ?? 0;\r\n    let nrows = 0;\r\n\r\n    groups.forEach(g => {\r\n        // NOTE: justify-self is for the [likely to be used] sticky to work\r\n        if (g.label) {\r\n            const new_style = {...g.label.props?.style, 'grid-column': `1 / span ${ncols}`, 'justify-self': 'start'}\r\n            cells.push(React.cloneElement(g.label, {style: new_style}));\r\n            nrows += 1;\r\n        }\r\n        g.fields.forEach(f => cells.push(...f.values))\r\n        nrows += g.fields.length;\r\n    })\r\n\r\n    // TODO: investigate the minmax etc\r\n    const gtcs = calc_sizes(opts.colws, ncols, 'minmax(max-content, 1fr)')\r\n    const gtrs = calc_sizes(opts.rowhs, nrows, 'max-content')\r\n\r\n    const style = {\r\n        'display': 'grid',\r\n        'grid-template-columns': gtcs.join(' '),\r\n        'grid-template-rows': gtrs.join(' '),\r\n    }\r\n\r\n    return {style, children: cells}\r\n}\r\n\r\n\r\nexport function HGrid(groups: GridGroup[], opts: GridOptions = {}) {\r\n\r\n    const cells: React.ReactNode[] = [];\r\n\r\n    const any_labels = groups.find(g => g.label);\r\n    let nrows = groups.find(g => g.fields.length)?.fields[0].values.length ?? 0;\r\n\r\n    // fixed layout all the groups label first, then let the    grid autolayout fields\r\n    if (any_labels) {\r\n        nrows += 1;\r\n        let col1 = 1;\r\n\r\n        groups.forEach(g => {\r\n            const new_style = {\r\n                'grid-row' : '1 / 2',\r\n                'grid-column' : `${col1} / span ${g.fields.length}`\r\n            };\r\n            const cell = g.label ? React.cloneElement(g.label, {style: {...g.label.props?.style, ...new_style}})\r\n                                 : React.createElement('div', {key: `__spacer.${col1}`, style: new_style});\r\n            cells.push(cell);\r\n            col1 += g.fields.length;\r\n        })\r\n    }\r\n\r\n    // TODO: some flatmap should be faster\r\n    let ncols = 0;  // this is needed for the widths only\r\n\r\n    groups.forEach(g => {\r\n        g.fields.forEach(f => {cells.push(...f.values)})\r\n        ncols += g.fields.length;\r\n    })\r\n\r\n    // minmax(max-content, 1fr)\r\n    const gtcs = calc_sizes(opts.colws, ncols, 'auto');\r\n    const gtrs = calc_sizes(opts.rowhs, nrows, 'max-content');\r\n\r\n    const style = {\r\n        'display': 'grid',\r\n        'grid-template-columns': gtcs.join(' '),\r\n        'grid-template-rows': gtrs.join(' '),\r\n        'grid-auto-flow': 'column',\r\n    }\r\n\r\n    return {style, children: cells}\r\n}","import { config } from '@grafana/runtime';\r\nimport { css } from 'emotion';\r\n\r\ninterface ClassBuildInput {\r\n    field: {\r\n        name: string;\r\n        value: string;\r\n    },\r\n    dimfield: {\r\n        name: string;\r\n        value: string;\r\n    },\r\n    grouplabel: string;\r\n    grid: string;\r\n}\r\n\r\nexport interface GridStyle {\r\n    get_fieldstyle: (dim?: boolean) => {\r\n        get_nameclass: (align?: string) => string;\r\n        get_valueclass: (align?: string) => string;\r\n    },\r\n    grouplabel: string;\r\n    grid: string;\r\n}\r\n\r\ninterface StyleBuildOptions {\r\n    dim: string;\r\n    hl: string;\r\n    sticky_bg: string\r\n    border_bg: string;\r\n}\r\n\r\nfunction build_classes(style: ClassBuildInput, prefix: string) {\r\n    return {\r\n        ...with_aligns(prefix + '__field__name', style.field.name),\r\n        ...with_aligns(prefix + '__field__value', style.field.value),\r\n        ...with_aligns(prefix + '__field--dim__name', style.dimfield.name),\r\n        ...with_aligns(prefix + '__field--dim__value', style.dimfield.value),\r\n        [prefix + '__grouplabel']: style.grouplabel,\r\n        [prefix]: style.grid,\r\n    }\r\n}\r\n\r\nfunction build_all() {\r\n\r\n    const theme = config.theme;\r\n\r\n    const normal_opts: StyleBuildOptions = {\r\n        dim: theme.colors.textSemiWeak,\r\n        hl: theme.colors.textBlue,\r\n        sticky_bg: theme.colors.panelBg,\r\n        border_bg: theme.colors.border1,\r\n    }\r\n\r\n    const transparent_opts: StyleBuildOptions = {\r\n        ...normal_opts,\r\n        sticky_bg: theme.colors.dashboardBg,\r\n    }\r\n\r\n\r\n    return {\r\n        ...build_classes(build_vstyle(normal_opts), 'panel__grid'),\r\n        ...build_classes(build_hstyle(normal_opts), 'panel__grid--horizontal'),\r\n        ...build_classes(build_vstyle(transparent_opts), 'panel--transparent__grid'),\r\n        ...build_classes(build_hstyle(transparent_opts), 'panel--transparent__grid--horizontal')\r\n    }\r\n}\r\n\r\nfunction with_aligns(s: string, base: string) {\r\n    return {\r\n        [s]: base,\r\n        [s + '--l']: css(base, css`text-align: left;`),\r\n        [s + '--r']: css(base, css`text-align: right;`),\r\n        [s + '--c']: css(base, css`text-align: center;`)\r\n    }\r\n}\r\n\r\nfunction build_vstyle(opts: StyleBuildOptions): ClassBuildInput {\r\n\r\n    const {cell, sticky, bborder, scrollbars, lborder, rborder} = build_common_style(opts);\r\n\r\n    return {\r\n        field: {\r\n            name: css(cell, sticky, bborder, css`\r\n                left: 0;\r\n                z-index: 2;\r\n                color: ${opts.dim};`),\r\n            value: css(cell, bborder, css`\r\n                text-align: right;`)\r\n        },\r\n        dimfield: {\r\n            name: css(cell, sticky, bborder, css`\r\n                left: 0;\r\n                top: 0;\r\n                z-index: 3;\r\n\r\n                padding: 15px 16px 4px 16px;\r\n\r\n                color: ${opts.dim};`),\r\n            value: css(cell, sticky, bborder, css`\r\n                top: 0;\r\n                z-index: 1;\r\n\r\n                padding: 15px 16px 4px 16px;\r\n\r\n                color: ${opts.hl};\r\n\r\n                text-align: right;`)\r\n        },\r\n        grouplabel: css(sticky, css`\r\n            left: 0;\r\n            z-index: 2;\r\n\r\n            padding: 19px 4px 0px 4px;\r\n            color: ${opts.hl};`),\r\n        grid: css(scrollbars, css`\r\n            overflow: auto;\r\n        `)\r\n    }\r\n}\r\n\r\n\r\nfunction build_common_style(opts: StyleBuildOptions) {\r\n    return {\r\n        cell: css`\r\n            padding: 9px 16px 9px 16px;\r\n            white-space: nowrap;`,\r\n        bborder: css`\r\n            border-bottom: 1px solid ${opts.border_bg};`,\r\n        tborder: css`\r\n            border-top: 1px solid ${opts.border_bg};`,\r\n        rborder: css`\r\n            border-right: 1px solid ${opts.border_bg};`,\r\n        lborder: css`\r\n            border-left: 1px solid ${opts.border_bg};`,\r\n        sticky: css`\r\n            position: sticky;\r\n            background-color: ${opts.sticky_bg};`,\r\n        scrollbars: css`\r\n            ::-webkit-scrollbar {\r\n                height: revert;\r\n            }\r\n            ::-webkit-scrollbar-corner {\r\n                background-color: ${opts.sticky_bg};\r\n            }`\r\n    }\r\n}\r\n\r\nfunction build_hstyle(opts: StyleBuildOptions): ClassBuildInput {\r\n\r\n    const {cell, sticky, bborder, scrollbars, lborder, rborder} = build_common_style(opts);\r\n\r\n    return {\r\n        field: {\r\n            name: css(cell, sticky, bborder, css`\r\n                top: 0;\r\n                z-index: 1;\r\n\r\n                color: ${opts.hl};\r\n\r\n                padding: 7px 16px 4px 16px;\r\n\r\n                text-align: right;\r\n                white-space: normal;`),\r\n            value: css(cell, bborder, css`\r\n                text-align: right;`),\r\n        },\r\n        dimfield: {\r\n            name: css(cell, sticky, bborder, css`\r\n                left: 0;\r\n                top: 0;\r\n                z-index: 3;\r\n\r\n                padding: 7px 16px 4px 16px;\r\n\r\n                color: ${opts.hl};\r\n\r\n                text-align: right;\r\n                white-space: normal;`),\r\n            value: css(cell, sticky, bborder, css`\r\n                left: 0;\r\n                z-index: 2;\r\n\r\n                color: ${opts.dim};\r\n                text-align: right;`),\r\n        },\r\n\r\n        grouplabel: css(cell, sticky, lborder, rborder, css`\r\n            top: 0;\r\n            color: ${opts.hl};\r\n\r\n            padding: 8px 4px 0px 4px;\r\n\r\n            text-align: center;\r\n\r\n            white-space: normal;`),\r\n        grid: css(scrollbars, css`\r\n            overflow: auto;\r\n            padding-bottom: 16px;\r\n        `)\r\n    }\r\n}\r\n\r\n\r\nconst CLASSES: { [key: string]: string } = build_all();\r\n\r\n\r\nexport function get_style(horizontal?: boolean, transparent?: boolean): GridStyle {\r\n\r\n    const prefix = `panel${transparent ? '--transparent' : ''}__grid${horizontal ? '--horizontal' : ''}`;\r\n\r\n    return {\r\n        grid: CLASSES[prefix],\r\n        grouplabel: CLASSES[`${prefix}__grouplabel`],\r\n        get_fieldstyle: (dim) => {\r\n            const field_prefix = `${prefix}__field${dim ? '--dim' : ''}`\r\n            return {\r\n                get_nameclass: (align) => { return CLASSES[`${field_prefix}__name${align ? '--' + align : ''}`] },\r\n                get_valueclass: (align) => { return CLASSES[`${field_prefix}__value${align ? '--' + align : ''}`] }\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { Field as DfField, getDisplayProcessor } from '@grafana/data';\r\n\r\nexport interface Labels {\r\n    [key: string]: string;\r\n}\r\n\r\nexport interface Field {\r\n    name: string,\r\n    labels?: Labels,\r\n}\r\n\r\nexport interface GroupSpec {\r\n    name?: string;\r\n    fields: Field[];\r\n    is_dim?: boolean;\r\n}\r\n\r\nexport function get_colspecs(spec: string | undefined, maxcols: number) {\r\n    if (!(spec && spec.length))\r\n        return [];\r\n\r\n    return parse_colspec(spec, maxcols);\r\n}\r\n\r\nexport function parse_colspec(str: string, size: number): { a: string | undefined, w: number }[] {\r\n    const re = /\\s*([r|c|l]?)\\s*([0-9]*)\\s*/;\r\n\r\n    const specs = str.split(',').map(f => {\r\n        const m = f.match(re);\r\n        const a = m && m[1] != '' ? m[1] : undefined;\r\n        const w = m && m[2] != '' ? Number.parseInt(m[2]) : 0;\r\n\r\n        return { a, w }\r\n    });\r\n\r\n    const len = specs.length;\r\n\r\n    if (len && len < size) {\r\n        specs.length = size;\r\n        specs.fill(specs[len - 1], len);\r\n    }\r\n\r\n    return specs;\r\n}\r\n\r\n\r\nexport function fields_to_groups(fields: Field[], dim?: string, label?: string): GroupSpec[] {\r\n\r\n    const groups: GroupSpec[] = [];\r\n\r\n    if (dim && dim.length) {\r\n        const dimfield = fields.find(f => f.name == dim);\r\n        if (dimfield) {\r\n            groups.push({ fields: [dimfield], is_dim: true })\r\n            fields = fields.filter(f => f != dimfield);\r\n        }\r\n    }\r\n\r\n    if (label && label.length) {\r\n        const gm = new Map<string | undefined, Field[]>();\r\n        gm.set(undefined, []);\r\n\r\n        fields.forEach(f => {\r\n            const lab = f?.labels?.[label];\r\n            if (!gm.has(lab))\r\n                gm.set(lab, [])\r\n            gm.get(lab)?.push(f)  // '?' just to calm down the linter\r\n        }\r\n        );\r\n\r\n        if (!gm.get(undefined)?.length)\r\n            gm.delete(undefined);\r\n\r\n        groups.push(...[...gm].map(([name, fields]) => { return { name, fields } }))\r\n    }\r\n    else {\r\n        groups.push({ fields }) // shortcut if no grouping\r\n    }\r\n\r\n    return groups;\r\n}\r\n\r\nexport function discover_unit(field: DfField): string | undefined {\r\n    // try to render the field with the sample input == 1 to obtain the unit.\r\n    // probing with 0 may be wrong since it may be special.\r\n    // mappings are detached while probing and reattached later.\r\n    const saved_mappings = field.config.mappings;\r\n    field.config.mappings = undefined;\r\n    const unit = getDisplayProcessor({ field })(1).suffix;\r\n    field.config.mappings = saved_mappings;\r\n\r\n    return unit && unit.length ? unit : undefined\r\n}","import React from 'react';\nimport moment from 'moment';\n\nimport { PanelProps, getFieldDisplayName, getDisplayProcessor, Field as DfField, DataFrame, FieldType } from '@grafana/data';\nimport { getTextColorForBackground } from '@grafana/ui';\n\nimport { config as gf_config} from \"@grafana/runtime\"\n\nimport { VGrid, HGrid, GridField, GridGroup } from './grid';\nimport { get_style, GridStyle} from './styles'\nimport { discover_unit, fields_to_groups, get_colspecs, GroupSpec } from './utils';\n\nvar rce = React.createElement;\n\nexport interface VTableOptions {\n  custom_columns?: string;\n  dimension_field?: string;\n  is_horizontal?: boolean;\n  show_common_unit?: boolean;\n  group_by_label?: string;\n  use_formatcode?: boolean;\n  formatcode?: string;\n  sort: {\n    field?: string;\n    zeronull?: boolean;\n    nullfirst?: boolean;\n    desc?: boolean;\n  }\n}\n\ninterface FieldStyle {\n  nameclass: string;\n  get_valueclass: (i: number) => string;\n}\n\ntype Formatter = (value: ValueSpec, field: DfField, context: any) => void;\n\ninterface FieldCtx {\n  df: DataFrame,\n  formatter?: Formatter,\n  style: GridStyle,\n  order?: number[],\n}\n\ninterface ValueSpec {\n    raw: any,\n    i: number,\n    name: string,\n    text: string;\n    style: {},\n    html: string | undefined,\n}\n\nfunction colorize_cell(mode: string | undefined, color: string | undefined) {\n  if (!color) return {};\n  if (mode == 'fg') return { 'color': color };\n  if (mode == 'bg') return { 'background': color, 'color': getTextColorForBackground(color) };\n  return {};\n}\n\nfunction create_field(field: DfField, options: VTableOptions, ctx: FieldCtx, style: FieldStyle): GridField {\n  const { df, formatter, order } = ctx;\n  const field_name = getFieldDisplayName(field, df);\n\n  const display = field.display ?? getDisplayProcessor({ field });\n\n  const common_unit = (options.show_common_unit && field.type == FieldType.number)\n                      ? discover_unit(field) : undefined\n\n  const namecell = rce(\n    'div',\n    {\n      key: field.name,\n      className: style.nameclass,\n    },\n    common_unit ? `${field_name}, ${common_unit}` : field_name\n  );\n\n  const cells = [namecell];\n\n  // the index loop here instead of map is for easily attaching the sorting feature\n  // should it be needed someday\n  for (var i = 0; i < field.values.length; i++) {\n\n    const key = `${field.name}.${i}`\n\n    let v = field.values.get(order ? order[i] : i);\n    if (v == null)\n      v = undefined;\n\n    const dv = display(v);\n    const spec: ValueSpec = {\n      raw: v,\n      i,\n      name: field.name,\n      text: options.show_common_unit ? dv.text : `${dv.prefix ?? ''}${dv.text}${dv.suffix ?? ''}`,\n      style: colorize_cell(field.config.custom?.display_mode, dv.color),\n      html: undefined,\n    }\n\n    if (formatter) {\n      try { formatter(spec, field, {}) }\n      catch (e) { }\n    }\n\n    let cell;\n\n    if (spec?.html) {\n      cell = rce(\n        'div',\n        {\n          key,\n          style: spec.style,\n          className: style.get_valueclass(i),\n          dangerouslySetInnerHTML: { __html: spec.html },\n        });\n    }\n    else {\n      cell = rce(\n        'div',\n        {\n          key,\n          style: spec.style,\n          className: style.get_valueclass(i),\n        },\n        spec.text);\n    }\n\n    cells.push(cell);\n  }\n\n  return { values: cells }\n}\n\n\nfunction create_gridgroups(gss: GroupSpec[], options: VTableOptions, ctx: FieldCtx, aligns: (string | undefined)[]): GridGroup[] {\n\n  const field_style = (field_idx: number, is_dimension: boolean) => {\n    const fieldstyle = ctx.style.get_fieldstyle(is_dimension)\n    return options.is_horizontal ? {\n      nameclass: fieldstyle.get_nameclass(aligns[field_idx]),\n      get_valueclass: (i: number) => fieldstyle.get_valueclass(aligns[field_idx]),\n    } : {\n      nameclass: fieldstyle.get_nameclass(aligns[0]),\n      get_valueclass: (i: number) => fieldstyle.get_valueclass(aligns[i + 1]),\n    }\n  }\n\n  var field_idx = 0;\n\n  const gridgroups = gss.map(g => {\n    const key = `__group.${g?.name}`;\n    return {\n      label: g.name ? rce('div', { key, className: ctx.style.grouplabel }, g.name) : undefined,\n      fields: g.fields.map(f => create_field(f as DfField, options, ctx, field_style(field_idx++, !! g.is_dim)))\n    }\n  }\n  )\n\n  return gridgroups;\n}\n\n\nfunction num_comparer(a: number, b: number, nullfirst?: boolean, desc?: boolean): number {\n  if (a == null && b == null) return 0;\n  if (a == null) return nullfirst ? -1 : 1;\n  if (b == null) return nullfirst ? 1 : -1;\n\n  return desc ? (b - a) : (a - b);\n}\n\nfunction str_comparer(a: string, b: string, nullfirst?: boolean, desc?: boolean): number {\n  if (a == null && b == null) return 0;\n  if (a == null) return nullfirst ? -1 : 1;\n  if (b == null) return nullfirst ? 1 : -1;\n\n  if (desc) {\n    if (a > b) return -1;\n    if (a < b) return 1;\n  } else {\n    if (a < b) return -1;\n    if (a > b) return 1;\n  }\n  return 0;\n}\n\nfunction get_order(fields: DfField[], options: VTableOptions): number[] | undefined {\n\n  const { sort } = options;\n\n  if (!(sort.field && sort.field.length)) return undefined;\n\n  const field = fields.find(f => f.name == sort.field);\n  if (!field) return undefined;\n\n  const ordermap = field.values.toArray().map((v, i) => {\n    return { v: (v == 0 && sort.zeronull) ? null : v, i }\n  });\n\n  if (field.type == FieldType.number)\n    ordermap.sort((a, b) => num_comparer(a.v, b.v, sort.nullfirst, sort.desc));\n  else\n    ordermap.sort((a, b) => str_comparer(a.v, b.v, sort.nullfirst, sort.desc));\n\n  return ordermap.map(v => v.i);\n}\n\n\n// this returns the maximum of rows or columns regardless of the orientation\nfunction estimate_maxcols(fields: DfField[]) {\n  return Math.max(fields.length, fields?.[0].values.length + 1 ?? 1);\n}\n\n\n\nexport function VTable({ data, options, height, width, transparent }: PanelProps<VTableOptions>) {\n  const is_empty = !(data.series && data.series.length && data.series[0]?.fields?.length);\n\n  if (is_empty)\n    return rce('div', null, 'No data');\n\n  const df = data.series[0];\n  const fields = df.fields;\n  const style = get_style(options.is_horizontal, transparent);\n\n  const maxcols = estimate_maxcols(fields);\n  const colspecs = get_colspecs(options.custom_columns, maxcols);\n\n  let formatter: Formatter | undefined;\n\n  if (gf_config.disableSanitizeHtml && options.use_formatcode && options.formatcode) {\n    try {\n      const f = Function('value', 'field', 'context', 'lib', options.formatcode);\n      formatter = (value, field, context) => f(value, field, { df, ...context }, { moment })\n    }\n    catch (e) {\n      console.log('failed to compile formatter', e)\n    }\n  }\n\n  console.log('render');\n\n  const ctx: FieldCtx = {\n    formatter,\n    df,\n    style,\n    order: get_order(fields, options),\n  }\n\n  const groups = fields_to_groups(fields, options.dimension_field, options.group_by_label);\n  const gridgroups = create_gridgroups(groups, options, ctx, colspecs.map(c => c.a));\n\n  const grid = (options.is_horizontal ? HGrid : VGrid)(gridgroups,\n    { colws: colspecs.length ? colspecs.map(c => c.w) : undefined},\n  )\n\n  const container = rce(\n    'div',\n    {\n      style: {\n        'width': width,\n        'height': height,\n        'display': 'flex',\n        'flex-direction': 'column',\n      },\n    },\n    rce(\n      'div',\n      {\n        className: style.grid,\n        ...grid})\n    // TODO: add series picker after the grid if there are multiple queries\n  );\n\n  return container;\n};","import React from 'react';\n\nimport { FieldOverrideContext, getFieldDisplayName, Labels, PanelPlugin} from '@grafana/data';\nimport { CodeEditor, CodeEditorSuggestionItem, CodeEditorSuggestionItemKind} from '@grafana/ui';\nimport { VTable, VTableOptions } from './vtable';\n\nimport {config as gf_config} from \"@grafana/runtime\"\nimport Options from '@grafana/ui/slate-plugins/slate-prism/options';\n\ninterface CustomFieldConfig {\n    display_mode: string;\n}\n\nconst suggestions: CodeEditorSuggestionItem[] = [\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'value' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'value.text' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'value.style' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'value.html' },\n    { kind: CodeEditorSuggestionItemKind.Constant, label: 'value.raw' },\n    { kind: CodeEditorSuggestionItemKind.Constant, label: 'value.name' },\n    { kind: CodeEditorSuggestionItemKind.Constant, label: 'value.i' },\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'field' },\n    { kind: CodeEditorSuggestionItemKind.Constant, label: 'field.name' },\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'lib' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'lib.moment' },\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'context' },\n    { kind: CodeEditorSuggestionItemKind.Constant, label: 'context.df' },\n]\n\nconst DEF_CODE = `\n/*\n    This code would be called for formatting each value.\n    The object 'value' is in scope for modification.\n\n    Set the text:\n      value.text = 'foo'\n    Set the style:\n      value.style = {'color': 'red', 'border': '1px solid'}\n    Render as html instead of text:\n      value.html = '<a href=\"http://www.grafana.com\">Go to base</a>'\n    Get raw (numeric) value:\n      let a = value.raw\n\n    Extra objects are in scope to help the formatting:\n      field: dataframe field of this value. The field.name is most useful here.\n      context.df: whole dataframe\n      lib.moment: moment.js library, handy for the datetimes.\n*/\n\nvalue.text = field.name + ':' + value.raw\nvalue.style = {'color': 'red'}`;\n\nfunction JsEditor({ value, onChange } : {value: string, onChange: (s: string) => void}) {\n    return React.createElement(CodeEditor,\n        {\n            value,\n            onBlur: onChange,\n            onSave: onChange,\n            language: 'javascript',\n            showMiniMap: false,\n            showLineNumbers: true,\n            getSuggestions: () => suggestions,\n            height: 400,\n            // width:'100%',\n\n        });\n}\n\nconst fetch_groups = async (context: FieldOverrideContext) => {\n    const options = [{ value: '', label: '' }]\n    if (context && context.data && context.data.length) {\n        const df = context.data[0];\n        const labels: string[] = []\n        df.fields.filter(f => f.labels).forEach((f) =>\n            Object.entries(f.labels as Labels).forEach(([k, v]) => {\n                if (k != undefined && v != undefined && !labels.includes(k))\n                    labels.push(k)\n            })\n        )\n        labels.forEach(l => options.push({ label: l, value: l }))\n    }\n    return Promise.resolve(options);\n}\n\nconst fetch_fields = async (context: FieldOverrideContext) => {\n    const options = [{ value: '', label: '' }]\n    if (context && context.data && context.data.length) {\n        const df = context.data[0];\n        df.fields.forEach(\n            f => {\n                const label = getFieldDisplayName(f, df)\n                options.push({ label: label != f.name ? `${label} (${f.name})` : f.name, value: f.name })\n            })\n    }\n    return Promise.resolve(options);\n}\n\nexport const plugin = new PanelPlugin<VTableOptions, CustomFieldConfig>(VTable)\n\nplugin.setPanelOptions((builder) => {\n    builder\n        .addSelect({\n            path: 'dimension_field',\n            name: 'Dimension field name',\n            settings: {\n                allowCustomValue: true,\n                options: [],\n                getOptions: fetch_fields,\n            },\n            defaultValue: '',\n        })\n        .addBooleanSwitch({\n            path: 'is_horizontal',\n            name: 'Horizontal layout ',\n            defaultValue: false,\n        })\n        .addBooleanSwitch({\n            path: 'show_common_unit',\n            name: 'Show common unit',\n            defaultValue: true,\n        })\n        .addSelect({\n            path: 'group_by_label',\n            name: 'Group by label',\n            settings: {\n                allowCustomValue: true,\n                options: [],\n                getOptions: fetch_groups,\n            },\n            defaultValue: '',\n        })\n        .addTextInput({\n            path: 'custom_columns',\n            name: 'Custom column widths and text alignments',\n            description: 'Comma-separated format string: r100, c200, l300, etc'\n        })\n        .addSelect({\n            path: 'sort.field',\n            name: 'By field',\n            settings: {\n                allowCustomValue: true,\n                options: [],\n                getOptions: fetch_fields,\n            },\n            defaultValue: '',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'sort.desc',\n            name: 'Descending',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'sort.zeronull',\n            name: 'Treat zeros as nulls',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'sort.nullfirst',\n            name: 'Nulls go first',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'use_formatcode',\n            name: 'Use formatting code (DANGER!)',\n            description: gf_config.disableSanitizeHtml ? \"\" : \"Feature is disabled. Set disable_sanitize_html = false in Grafana config to activate it.\",\n            category: ['Custom formatting'],\n            defaultValue: false,\n        })\n        .addCustomEditor({\n            id: 'formatcode',\n            path: 'formatcode',\n            name: 'Code',\n            showIf: (options) => options.use_formatcode && gf_config.disableSanitizeHtml,\n            category: ['Custom formatting'],\n            editor: JsEditor,\n            defaultValue: DEF_CODE,\n        })\n})\n\nplugin.useFieldConfig({\n    useCustomConfig: (builder) => {\n        builder\n            .addRadio({\n                path: 'display_mode',\n                name: 'Cell display mode',\n                settings: {\n                    options: [\n                        { value: 'auto', label: 'Auto' },\n                        { value: 'fg', label: 'Color text' },\n                        { value: 'bg', label: 'Color background' },\n                    ],\n                },\n                defaultValue: 'auto'\n            })\n    }\n})"],"sourceRoot":""}