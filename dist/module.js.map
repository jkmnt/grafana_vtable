{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///./grid.ts","webpack:///./module.ts","webpack:///./styles.ts","webpack:///./vtable.ts","webpack:///external \"@grafana/data\"","webpack:///external \"@grafana/runtime\"","webpack:///external \"@grafana/ui\"","webpack:///external \"emotion\"","webpack:///external \"moment\"","webpack:///external \"react\""],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,8EAA8E;AACvG;AACA;;AAEO;AACP;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEO;AACP;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;;AAEO;AACP,mCAAmC,oCAAoC;AACvE;;AAEO;AACP;AACA;;AAEO;AACP,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;;AAEO;AACP,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;;AAEO;AACP;AACA,kCAAkC,oCAAoC,aAAa,EAAE,EAAE;AACvF,CAAC;AACD;AACA;AACA,CAAC;;AAEM;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;;AAEA;AACO;AACP,4BAA4B,sBAAsB;AAClD;AACA;AACA;;AAEA;AACO;AACP,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;;AAEO;AACP,4EAA4E,OAAO;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA,iBAAiB,sFAAsF,aAAa,EAAE;AACtH,sBAAsB,gCAAgC,qCAAqC,0CAA0C,EAAE,EAAE,GAAG;AAC5I,2BAA2B,MAAM,eAAe,EAAE,YAAY,oBAAoB,EAAE;AACpF,sBAAsB,oGAAoG;AAC1H,6BAA6B,uBAAuB;AACpD,4BAA4B,wBAAwB;AACpD,2BAA2B,yDAAyD;AACpF;;AAEO;AACP;AACA,iBAAiB,4CAA4C,SAAS,EAAE,qDAAqD,aAAa,EAAE;AAC5I,yBAAyB,6BAA6B,oBAAoB,gDAAgD,gBAAgB,EAAE,KAAK;AACjJ;;AAEO;AACP;AACA;AACA,2GAA2G,sFAAsF,aAAa,EAAE;AAChN,sBAAsB,8BAA8B,gDAAgD,uDAAuD,EAAE,EAAE,GAAG;AAClK,4CAA4C,sCAAsC,UAAU,oBAAoB,EAAE,EAAE,UAAU;AAC9H;;AAEO;AACP,gCAAgC,uCAAuC,aAAa,EAAE,EAAE,OAAO,kBAAkB;AACjH;AACA;;AAEA;AACA,yCAAyC,6BAA6B;AACtE,CAAC;AACD;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP,4CAA4C;AAC5C;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC9OA;;AAoBA,SAAS,UAAT,CAAoB,IAApB,EAAgD,CAAhD,EAA2D,OAA3D,EAA0E;AACtE,MAAM,KAAK,GAAG,KAAK,CAAC,CAAD,CAAL,CAAS,IAAT,CAAc,OAAd,CAAd;AAEA,MAAI,EAAG,IAAI,IAAI,IAAI,CAAC,MAAhB,CAAJ,EAA6B,OAAO,KAAP;;AAE7B,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA4B;AACxB,QAAM,CAAC,GAAG,IAAI,CAAC,CAAD,CAAd;AACA,QAAI,CAAC,IAAI,CAAC,GAAG,CAAb,EACI,KAAK,CAAC,CAAD,CAAL,GAAc,CAAC,OAAf;AACP;;AAED,SAAO,KAAP;AACH;;AAEK,SAAU,KAAV,CAAgB,KAAhB,EAAgC;;;AAClC,MAAM,MAAM,GAAG,KAAK,CAAC,MAArB;AAEA,MAAM,KAAK,GAAsB,EAAjC;AACA,MAAM,KAAK,GAAG,kBAAM,CAAC,IAAP,CAAY,aAAC;AAAI,YAAC,CAAC,MAAF;AAAe,GAAhC,OAAiC,IAAjC,IAAiC,aAAjC,GAAiC,MAAjC,GAAiC,GAAE,MAAF,CAAS,CAAT,EAAY,MAAZ,CAAmB,MAApD,MAA0D,IAA1D,IAA0D,aAA1D,GAA0D,EAA1D,GAA8D,CAA5E;AACA,MAAI,KAAK,GAAG,CAAZ;AAEA,QAAM,CAAC,OAAP,CAAe,aAAC;WAAA,CACZ;;;AACA,QAAI,CAAC,CAAC,KAAN,EAAa;AACT,UAAM,SAAS,qHAAO,OAAC,CAAC,KAAF,CAAQ,KAAR,MAAa,IAAb,IAAa,aAAb,GAAa,MAAb,GAAa,GAAE,KAAtB,GAA2B;AAAE,uBAAe,cAAY,KAA7B;AAAsC,wBAAgB;AAAtD,OAA3B,CAAf;;AACA,WAAK,CAAC,IAAN,CAAW,4CAAK,CAAC,YAAN,CAAmB,CAAC,CAAC,KAArB,EAA4B;AAAC,aAAK,EAAE;AAAR,OAA5B,CAAX;AACA,WAAK,IAAI,CAAT;AACH;;AACD,KAAC,CAAC,MAAF,CAAS,OAAT,CAAiB,aAAC;AAAI,kBAAK,CAAC,IAAN,CAAU,KAAV,QAAK,qHAAS,CAAC,CAAf,MAAK,EAAL;AAAuB,KAA7C;AACA,SAAK,IAAI,CAAC,CAAC,MAAF,CAAS,MAAlB;AACH,GATD,EAPkC,CAkBlC;;AACA,MAAM,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,KAAP,EAAc,KAAd,EAAqB,0BAArB,CAAvB;AACA,MAAM,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,KAAP,EAAc,KAAd,EAAqB,aAArB,CAAvB;AAEA,MAAM,KAAK,GAAG;AACV,eAAW,MADD;AAEV,6BAAyB,IAAI,CAAC,IAAL,CAAU,GAAV,CAFf;AAGV,0BAAsB,IAAI,CAAC,IAAL,CAAU,GAAV;AAHZ,GAAd;AAMA,SAAO,4CAAK,CAAC,aAAN,CAAoB,KAApB,EAA2B;AAAE,SAAK,OAAP;AAAS,aAAS,EAAE,KAAK,CAAC;AAA1B,GAA3B,EAAkE,KAAlE,CAAP;AACH;AAGK,SAAU,KAAV,CAAgB,KAAhB,EAAgC;;;AAClC,MAAM,MAAM,GAAG,KAAK,CAAC,MAArB;AAEA,MAAM,KAAK,GAAsB,EAAjC;AAEA,MAAM,UAAU,GAAG,MAAM,CAAC,IAAP,CAAY,aAAC;AAAI,YAAC,CAAD;AAAO,GAAxB,CAAnB;AACA,MAAI,KAAK,GAAG,kBAAM,CAAC,IAAP,CAAY,aAAC;AAAI,YAAC,CAAC,MAAF;AAAe,GAAhC,OAAiC,IAAjC,IAAiC,aAAjC,GAAiC,MAAjC,GAAiC,GAAE,MAAF,CAAS,CAAT,EAAY,MAAZ,CAAmB,MAApD,MAA0D,IAA1D,IAA0D,aAA1D,GAA0D,EAA1D,GAA8D,CAA1E,CANkC,CAQlC;;AACA,MAAI,UAAJ,EAAgB;AACZ,SAAK,IAAI,CAAT;AACA,QAAI,MAAI,GAAG,CAAX;AAEA,UAAM,CAAC,OAAP,CAAe,aAAC;;;AACZ,UAAM,SAAS,GAAG;AACd,oBAAa,OADC;AAEd,uBAAmB,MAAI,aAAJ,GAAe,CAAC,CAAC,MAAF,CAAS;AAF7B,OAAlB;AAIA,UAAM,IAAI,GAAG,CAAC,CAAC,KAAF,GAAU,4CAAK,CAAC,YAAN,CAAmB,CAAC,CAAC,KAArB,EAA4B;AAAC,aAAK,oHAAM,OAAC,CAAC,KAAF,CAAQ,KAAR,MAAa,IAAb,IAAa,aAAb,GAAa,MAAb,GAAa,GAAE,KAArB,GAA+B,SAA/B;AAAN,OAA5B,CAAV,GACU,4CAAK,CAAC,aAAN,CAAoB,KAApB,EAA2B;AAAC,aAAK,EAAE;AAAR,OAA3B,CADvB;AAEA,WAAK,CAAC,IAAN,CAAW,IAAX;AACA,YAAI,IAAI,CAAC,CAAC,MAAF,CAAS,MAAjB;AACH,KATD;AAUH,GAvBiC,CAyBlC;;;AACA,MAAI,KAAK,GAAG,CAAZ,CA1BkC,CA0BlB;;AAEhB,QAAM,CAAC,OAAP,CAAe,aAAC;AACZ,KAAC,CAAC,MAAF,CAAS,OAAT,CAAiB,aAAC;AAAK,WAAK,CAAC,IAAN,CAAU,KAAV,QAAK,qHAAS,CAAC,CAAC,MAAX,EAAL;AAAwB,KAA/C;AACA,SAAK,IAAI,CAAC,CAAC,MAAF,CAAS,MAAlB;AACH,GAHD,EA5BkC,CAiClC;;AACA,MAAM,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,KAAP,EAAc,KAAd,EAAqB,MAArB,CAAvB;AACA,MAAM,IAAI,GAAG,UAAU,CAAC,KAAK,CAAC,KAAP,EAAc,KAAd,EAAqB,aAArB,CAAvB;AAEA,MAAM,KAAK,GAAG;AACV,eAAW,MADD;AAEV,6BAAyB,IAAI,CAAC,IAAL,CAAU,GAAV,CAFf;AAGV,0BAAsB,IAAI,CAAC,IAAL,CAAU,GAAV,CAHZ;AAIV,sBAAkB;AAJR,GAAd;AAOA,SAAO,4CAAK,CAAC,aAAN,CAAoB,KAApB,EAA2B;AAAE,SAAK,OAAP;AAAS,aAAS,EAAE,KAAK,CAAC;AAA1B,GAA3B,EAAkE,KAAlE,CAAP;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;AC/GD;AAEA;AACA;AACA;AAEA;AAMA,IAAM,WAAW,GAA+B,CAC5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,KAArC;AAA4C,OAAK,EAAE;AAAnD,CAD4C,EAE5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,QAArC;AAA+C,OAAK,EAAE;AAAtD,CAF4C,EAG5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,QAArC;AAA+C,OAAK,EAAE;AAAtD,CAH4C,EAI5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,QAArC;AAA+C,OAAK,EAAE;AAAtD,CAJ4C,EAK5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,QAArC;AAA+C,OAAK,EAAE;AAAtD,CAL4C,EAM5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,KAArC;AAA4C,OAAK,EAAE;AAAnD,CAN4C,EAO5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,QAArC;AAA+C,OAAK,EAAE;AAAtD,CAP4C,EAQ5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,KAArC;AAA4C,OAAK,EAAE;AAAnD,CAR4C,EAS5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,QAArC;AAA+C,OAAK,EAAE;AAAtD,CAT4C,EAU5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,KAArC;AAA4C,OAAK,EAAE;AAAnD,CAV4C,EAW5C;AAAE,MAAI,EAAE,wEAA4B,CAAC,QAArC;AAA+C,OAAK,EAAE;AAAtD,CAX4C,CAAhD;AAcA,IAAM,QAAQ,GAAG,wtBAAjB;;AAuBA,SAAS,QAAT,CAAkB,EAAlB,EAAsF;MAAlE,KAAK,W;MAAE,QAAQ,c;AAC/B,SAAO,4CAAK,CAAC,aAAN,CAAoB,sDAApB,EACH;AACI,SAAK,OADT;AAEI,UAAM,EAAE,QAFZ;AAGI,UAAM,EAAE,QAHZ;AAII,YAAQ,EAAE,YAJd;AAKI,eAAW,EAAE,KALjB;AAMI,mBAAe,EAAE,IANrB;AAOI,kBAAc,EAAE;AAAM;AAAW,KAPrC;AAQI,UAAM,EAAE,GARZ,CASI;;AATJ,GADG,CAAP;AAaH;;AAED,IAAM,YAAY,GAAG,SAAf,YAAe,CAAO,OAAP,EAAoC;AAAA;;;AAC/C,aAAO,GAAG,CAAC;AAAE,aAAK,EAAE,EAAT;AAAa,aAAK,EAAE;AAApB,OAAD,CAAV;;AACN,UAAI,OAAO,IAAI,OAAO,CAAC,IAAnB,IAA2B,OAAO,CAAC,IAAR,CAAa,MAA5C,EAAoD;AAC1C,UAAE,GAAG,OAAO,CAAC,IAAR,CAAa,CAAb,CAAL;AACA,mBAAmB,EAAnB;AACN,UAAE,CAAC,MAAH,CAAU,MAAV,CAAiB,aAAC;AAAI,kBAAC,CAAD;AAAQ,SAA9B,EAAgC,OAAhC,CAAwC,UAAC,CAAD,EAAE;AACtC,uBAAM,CAAC,OAAP,CAAe,CAAC,CAAC,MAAjB,EAAmC,OAAnC,CAA2C,UAAC,EAAD,EAAO;gBAAN,gE;gBAAC,CAAC,Q;gBAAE,CAAC,Q;;AAC7C,gBAAI,CAAC,IAAI,SAAL,IAAkB,CAAC,IAAI,SAAvB,IAAoC,CAAC,QAAM,CAAC,QAAP,CAAgB,CAAhB,CAAzC,EACI,QAAM,CAAC,IAAP,CAAY,CAAZ;AACP,WAHD;AAGE,SAJN;AAMA,gBAAM,CAAC,OAAP,CAAe,aAAC;AAAI,wBAAO,CAAC,IAAR,CAAa;AAAE,iBAAK,EAAE,CAAT;AAAY,iBAAK,EAA9B;AAAa,WAAb;AAAoC,SAAxD;AACH;;AACD;AAAA;AAAA,QAAO,OAAO,CAAC,OAAR,CAAgB,OAAhB,CAAP;;GAbqD;AAcxD,CAdD;;AAgBA,IAAM,YAAY,GAAG,SAAf,YAAe,CAAO,OAAP,EAAoC;AAAA;;;AAC/C,aAAO,GAAG,CAAC;AAAE,aAAK,EAAE,EAAT;AAAa,aAAK,EAAE;AAApB,OAAD,CAAV;;AACN,UAAI,OAAO,IAAI,OAAO,CAAC,IAAnB,IAA2B,OAAO,CAAC,IAAR,CAAa,MAA5C,EAAoD;AAC1C,eAAK,OAAO,CAAC,IAAR,CAAa,CAAb,CAAL;AACN,YAAE,CAAC,MAAH,CAAU,OAAV,CACI,aAAC;AACG,cAAM,KAAK,GAAG,yEAAmB,CAAC,CAAD,EAAI,IAAJ,CAAjC;AACA,iBAAO,CAAC,IAAR,CAAa;AAAE,iBAAK,EAAE,KAAK,IAAI,CAAC,CAAC,IAAX,GAAqB,KAAK,OAAL,GAAU,CAAC,CAAC,IAAZ,GAAgB,GAArC,GAA2C,CAAC,CAAC,IAAtD;AAA4D,iBAAK,EAAE,CAAC,CAAC;AAArE,WAAb;AACH,SAJL;AAKH;;AACD;AAAA;AAAA,QAAO,OAAO,CAAC,OAAR,CAAgB,OAAhB,CAAP;;GAVqD;AAWxD,CAXD;;AAaO,IAAM,MAAM,GAAG,IAAI,yDAAJ,CAAkD,8CAAlD,CAAf;AAEP,MAAM,CAAC,eAAP,CAAuB,UAAC,OAAD,EAAQ;AAC3B,SAAO,CACF,SADL,CACe;AACP,QAAI,EAAE,iBADC;AAEP,QAAI,EAAE,sBAFC;AAGP,YAAQ,EAAE;AACN,sBAAgB,EAAE,IADZ;AAEN,aAAO,EAAE,EAFH;AAGN,gBAAU,EAAE;AAHN,KAHH;AAQP,gBAAY,EAAE;AARP,GADf,EAWK,gBAXL,CAWsB;AACd,QAAI,EAAE,eADQ;AAEd,QAAI,EAAE,oBAFQ;AAGd,gBAAY,EAAE;AAHA,GAXtB,EAgBK,gBAhBL,CAgBsB;AACd,QAAI,EAAE,kBADQ;AAEd,QAAI,EAAE,kBAFQ;AAGd,gBAAY,EAAE;AAHA,GAhBtB,EAqBK,SArBL,CAqBe;AACP,QAAI,EAAE,gBADC;AAEP,QAAI,EAAE,gBAFC;AAGP,YAAQ,EAAE;AACN,sBAAgB,EAAE,IADZ;AAEN,aAAO,EAAE,EAFH;AAGN,gBAAU,EAAE;AAHN,KAHH;AAQP,gBAAY,EAAE;AARP,GArBf,EA+BK,YA/BL,CA+BkB;AACV,QAAI,EAAE,gBADI;AAEV,QAAI,EAAE,0CAFI;AAGV,eAAW,EAAE;AAHH,GA/BlB,EAoCK,SApCL,CAoCe;AACP,QAAI,EAAE,YADC;AAEP,QAAI,EAAE,UAFC;AAGP,YAAQ,EAAE;AACN,sBAAgB,EAAE,IADZ;AAEN,aAAO,EAAE,EAFH;AAGN,gBAAU,EAAE;AAHN,KAHH;AAQP,gBAAY,EAAE,EARP;AASP,YAAQ,EAAE,CAAC,MAAD;AATH,GApCf,EA+CK,gBA/CL,CA+CsB;AACd,QAAI,EAAE,WADQ;AAEd,QAAI,EAAE,YAFQ;AAGd,YAAQ,EAAE,CAAC,MAAD;AAHI,GA/CtB,EAoDK,gBApDL,CAoDsB;AACd,QAAI,EAAE,eADQ;AAEd,QAAI,EAAE,sBAFQ;AAGd,YAAQ,EAAE,CAAC,MAAD;AAHI,GApDtB,EAyDK,gBAzDL,CAyDsB;AACd,QAAI,EAAE,gBADQ;AAEd,QAAI,EAAE,gBAFQ;AAGd,YAAQ,EAAE,CAAC,MAAD;AAHI,GAzDtB,EA8DK,gBA9DL,CA8DsB;AACd,QAAI,EAAE,gBADQ;AAEd,QAAI,EAAE,+BAFQ;AAGd,eAAW,EAAE,uDAAS,CAAC,mBAAV,GAAgC,EAAhC,GAAqC,0FAHpC;AAId,YAAQ,EAAE,CAAC,mBAAD,CAJI;AAKd,gBAAY,EAAE;AALA,GA9DtB,EAqEK,eArEL,CAqEqB;AACb,MAAE,EAAE,YADS;AAEb,QAAI,EAAE,YAFO;AAGb,QAAI,EAAE,MAHO;AAIb,UAAM,EAAE,gBAAC,OAAD,EAAQ;AAAK,oBAAO,CAAC,cAAR,IAA0B,uDAAS,CAAnC;AAAuD,KAJ/D;AAKb,YAAQ,EAAE,CAAC,mBAAD,CALG;AAMb,UAAM,EAAE,QANK;AAOb,gBAAY,EAAE;AAPD,GArErB;AA8EH,CA/ED;AAiFA,MAAM,CAAC,cAAP,CAAsB;AAClB,iBAAe,EAAE,yBAAC,OAAD,EAAQ;AACrB,WAAO,CACF,QADL,CACc;AACN,UAAI,EAAE,cADA;AAEN,UAAI,EAAE,mBAFA;AAGN,cAAQ,EAAE;AACN,eAAO,EAAE,CACL;AAAE,eAAK,EAAE,MAAT;AAAiB,eAAK,EAAE;AAAxB,SADK,EAEL;AAAE,eAAK,EAAE,IAAT;AAAe,eAAK,EAAE;AAAtB,SAFK,EAGL;AAAE,eAAK,EAAE,IAAT;AAAe,eAAK,EAAE;AAAtB,SAHK;AADH,OAHJ;AAUN,kBAAY,EAAE;AAVR,KADd;AAaH;AAfiB,CAAtB,E;;;;;;;;;;;;;;;;;;;;;AChLA;AACA;AAEO,IAAM,WAAW,GAA4B;AAChD,GAAC,EAAE,mDAAG,2JAD0C;AAEhD,GAAC,EAAE,mDAAG,+JAF0C;AAGhD,GAAC,EAAE,mDAAG;AAH0C,CAA7C;AAyBP,IAAI,MAAM,GAA0C,SAApD;AACA,IAAI,MAAJ;AAEM,SAAU,YAAV,CAAuB,aAAvB,EAA6C;AAC/C,MAAM,GAAG,GAAG,4DAAQ,EAApB,CAD+C,CAG/C;;AACA,MAAI,CAAE,MAAF,IAAY,MAAM,IAAI,GAA1B,EAA+B;AAC3B,QAAM,KAAK,GAAW;AAClB,SAAG,EAAE,GAAG,CAAC,MAAJ,CAAW,QADE;AAElB,QAAE,EAAE,GAAG,CAAC,MAAJ,CAAW,QAFG;AAGlB,eAAS,EAAE,GAAG,CAAC,MAAJ,CAAW,OAHJ;AAIlB,eAAS,EAAE,GAAG,CAAC,MAAJ,CAAW;AAJJ,KAAtB;AAMA,UAAM,GAAG,YAAY,CAAC,KAAD,CAArB;AACA,UAAM,GAAG,GAAT;AAEA,WAAO,CAAC,GAAR,CAAY,iBAAZ;AACH;;AAED,SAAO,aAAa,GAAG,MAAM,CAAC,CAAV,GAAc,MAAM,CAAC,CAAzC;AACH;;AAED,SAAS,YAAT,CAAsB,KAAtB,EAAkC;AAE9B,MAAM,IAAI,GAAG,mDAAG,+OAAhB;AAIA,MAAM,OAAO,GAAG,mDAAG,wMAC2B,SAD3B,KACY,KAAK,CAAC,SADlB,CAAnB;AAGA,MAAM,OAAO,GAAG,mDAAG,sMAC0B,SAD1B,KACW,KAAK,CAAC,SADjB,CAAnB;AAGA,MAAM,MAAM,GAAG,mDAAG,gPAEqB,SAFrB,KAEM,KAAK,CAAC,SAFZ,CAAlB;AAKA,MAAM,CAAC,GAAG;AACN,SAAK,EAAE;AACH,UAAI,EAAE,mDAAG,CAAC,IAAD,EAAO,MAAP,EAAe,OAAf,EAAwB,mDAAG,0SAGd,iBAHc,KAGvB,KAAK,CAAC,GAHiB,CAA3B,CADN;AAMH,WAAK,EAAE,mDAAG,CAAC,IAAD,EAAO,OAAP,EAAgB,mDAAG,6NAAnB;AANP,KADD;AAWN,YAAQ,EAAE;AACN,UAAI,EAAE,mDAAG,CAAC,IAAD,EAAO,MAAP,EAAe,mDAAG,kWAKL,iBALK,KAKd,KAAK,CAAC,GALQ,CAAlB,CADH;AAQN,WAAK,EAAE,mDAAG,CAAC,IAAD,EAAO,MAAP,EAAe,mDAAG,oVAIP,uDAJO,KAIf,KAAK,CAAC,EAJS,CAAlB;AARJ,KAXJ;AA4BN,cAAU,EAAE,mDAAG,CAAC,MAAD,EAAS,mDAAG,gWAKN,aALM,KAKd,KAAK,CAAC,EALQ,CAAZ;AA5BT,GAAV;AAqCA,MAAM,CAAC,GAAG;AACN,SAAK,EAAE;AACH,UAAI,EAAE,mDAAG,CAAC,IAAD,EAAO,MAAP,EAAe,mDAAG,0XAIN,6FAJM,KAId,KAAK,CAAC,EAJQ,CAAlB,CADN;AAUH,WAAK,EAAE,mDAAG,CAAC,IAAD,EAAO,OAAP,EAAgB,mDAAG,+NAAnB;AAVP,KADD;AAeN,YAAQ,EAAE;AACN,UAAI,EAAE,mDAAG,CAAC,IAAD,EAAO,MAAP,EAAe,mDAAG,8aAKN,6FALM,KAKd,KAAK,CAAC,EALQ,CAAlB,CADH;AAWN,WAAK,EAAE,mDAAG,CAAC,IAAD,EAAO,MAAP,EAAe,OAAf,EAAwB,mDAAG,oVAIf,qDAJe,KAIxB,KAAK,CAAC,GAJkB,CAA3B;AAXJ,KAfJ;AAkCN,cAAU,EAAE,mDAAG,CAAC,IAAD,EAAO,MAAP,EAAe,mDAAG,mSAEZ,oFAFY,KAEpB,KAAK,CAAC,EAFc,CAAlB;AAlCT,GAAV;AA4CA,SAAO;AAAC,KAAC,GAAF;AAAI,KAAC;AAAL,GAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvJD;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA,IAAI,GAAG,GAAG,4CAAK,CAAC,aAAhB;;AAyCA,SAAS,aAAT,CAAuB,IAAvB,EAAiD,KAAjD,EAA0E;AACxE,MAAI,CAAC,KAAL,EAAY,OAAO,EAAP;AACZ,MAAI,IAAI,IAAI,IAAZ,EAAkB,OAAO;AAAE,aAAS;AAAX,GAAP;AAClB,MAAI,IAAI,IAAI,IAAZ,EAAkB,OAAO;AAAE,kBAAc,KAAhB;AAAuB,aAAS,6EAAyB,CAAC,KAAD;AAAzD,GAAP;AAClB,SAAO,EAAP;AACD;;AAED,SAAS,YAAT,CAAsB,KAAtB,EAAsC,OAAtC,EAA8D,GAA9D,EAA6E,KAA7E,EAA8F;;;AACpF,QAAE,GAAuB,GAAG,CAA1B,EAAF;AAAA,MAAI,SAAS,GAAY,GAAG,CAAf,SAAb;AAAA,MAAe,KAAK,GAAK,GAAG,CAAR,KAApB;AACR,MAAM,UAAU,GAAG,yEAAmB,CAAC,KAAD,EAAQ,EAAR,CAAtC;AAEA,MAAI,CAAC,KAAK,CAAC,OAAX,EACE,KAAK,CAAC,OAAN,GAAgB,yEAAmB,CAAC;AAAE,SAAK,OAAP;AAAS,SAAK,EAAE,GAAG,CAAC;AAApB,GAAD,CAAnC;AAEF,MAAI,WAAW,GAAG,SAAlB,CAP4F,CAS5F;AACA;AACA;AACA;;AACA,MAAI,OAAO,CAAC,gBAAR,IAA4B,KAAK,CAAC,IAAN,IAAc,uDAAS,CAAC,MAAxD,EAAgE;AAC9D,QAAM,cAAc,GAAG,KAAK,CAAC,MAAN,CAAa,QAApC;AACA,SAAK,CAAC,MAAN,CAAa,QAAb,GAAwB,SAAxB;AACA,eAAW,GAAG,yEAAmB,CAAC;AAAE,WAAK,OAAP;AAAS,WAAK,EAAC,GAAG,CAAC;AAAnB,KAAD,CAAnB,CAAgD,CAAhD,EAAmD,MAAjE;AACA,SAAK,CAAC,MAAN,CAAa,QAAb,GAAwB,cAAxB;AACD;;AAED,MAAM,QAAQ,GAAG,GAAG,CAClB,KADkB,EAElB;AACE,OAAG,EAAE,KAAK,CAAC,IADb;AAEE,aAAS,EAAE,KAAK,CAAC;AAFnB,GAFkB,EAMlB,WAAW,GAAM,UAAU,OAAV,GAAe,WAArB,GAAqC,UAN9B,CAApB;AASA,MAAM,KAAK,GAAG,CAAC,QAAD,CAAd,CA7B4F,CA+B5F;AACA;;AACA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,CAAC,MAAN,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAE5C,QAAM,GAAG,GAAM,KAAK,CAAC,IAAN,GAAU,GAAV,GAAc,CAA7B;AAEA,QAAI,CAAC,GAAG,KAAK,CAAC,MAAN,CAAa,GAAb,CAAiB,KAAK,GAAG,KAAK,CAAC,CAAD,CAAR,GAAc,CAApC,CAAR;AACA,QAAI,CAAC,IAAI,IAAT,EACE,CAAC,GAAG,SAAJ;AAEF,QAAM,EAAE,GAAG,KAAK,CAAC,OAAN,CAAc,CAAd,CAAX;AACA,QAAM,IAAI,GAAc;AACtB,SAAG,EAAE,CADiB;AAEtB,OAAC,GAFqB;AAGtB,UAAI,EAAE,OAAO,CAAC,gBAAR,GAA2B,EAAE,CAAC,IAA9B,GAAqC,MAAG,QAAE,CAAC,MAAH,MAAS,IAAT,IAAS,aAAT,GAAS,EAAT,GAAa,EAAhB,IAAqB,EAAE,CAAC,IAAxB,IAA+B,QAAE,CAAC,MAAH,MAAS,IAAT,IAAS,aAAT,GAAS,EAAT,GAAa,EAA5C,CAHrB;AAItB,WAAK,EAAE,aAAa,CAAC,WAAK,CAAC,MAAN,CAAa,MAAb,MAAmB,IAAnB,IAAmB,aAAnB,GAAmB,MAAnB,GAAmB,GAAE,YAAtB,EAAoC,EAAE,CAAC,KAAvC,CAJE;AAKtB,UAAI,EAAE;AALgB,KAAxB;;AAQA,QAAI,SAAJ,EAAe;AACb,UAAI;AAAE,iBAAS,CAAC,IAAD,EAAO,KAAP,EAAc,EAAd,CAAT;AAA4B,OAAlC,CACA,OAAO,CAAP,EAAU,CAAG;AACd;;AAED,QAAI,IAAI,SAAR;;AAEA,QAAI,IAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAE,IAAV,EAAgB;AACd,UAAI,GAAG,GAAG,CACR,KADQ,EAER;AACE,WAAG,KADL;AAEE,aAAK,EAAE,IAAI,CAAC,KAFd;AAGE,iBAAS,EAAE,KAAK,CAAC,KAAN,CAAY,CAAZ,CAHb;AAIE,+BAAuB,EAAE;AAAE,gBAAM,EAAE,IAAI,CAAC;AAAf;AAJ3B,OAFQ,CAAV;AAQD,KATD,MAUK;AACH,UAAI,GAAG,GAAG,CACR,KADQ,EAER;AACE,WAAG,KADL;AAEE,aAAK,EAAE,IAAI,CAAC,KAFd;AAGE,iBAAS,EAAE,KAAK,CAAC,KAAN,CAAY,CAAZ;AAHb,OAFQ,EAOR,IAAI,CAAC,IAPG,CAAV;AAQD;;AAED,SAAK,CAAC,IAAN,CAAW,IAAX;AACD;;AAED,SAAO;AAAE,UAAM,EAAE;AAAV,GAAP;AACD;;AASD,SAAS,gBAAT,CAA0B,MAA1B,EAA6C,OAA7C,EAAmE;;;AACzD,MAAiB,GAAG,GAA4B,OAAO,CAAnC,eAApB;AAAA,MAAsC,KAAK,GAAK,OAAO,CAAZ,cAA3C;AAER,MAAM,MAAM,GAAgB,EAA5B;;AAEA,MAAI,GAAG,IAAI,GAAG,CAAC,MAAf,EAAuB;AACrB,QAAM,UAAQ,GAAG,MAAM,CAAC,IAAP,CAAY,aAAC;AAAI,cAAC,CAAC,IAAF;AAAa,KAA9B,CAAjB;;AACA,QAAI,UAAJ,EAAc;AACZ,YAAM,CAAC,IAAP,CAAY;AAAE,cAAM,EAAE,CAAC,UAAD,CAAV;AAAsB,cAAM,EAAE;AAA9B,OAAZ;AACA,YAAM,GAAG,MAAM,CAAC,MAAP,CAAc,aAAC;AAAI,gBAAC,IAAD;AAAa,OAAhC,CAAT;AACD;AACF;;AAED,MAAI,KAAK,IAAI,KAAK,CAAC,MAAnB,EAA2B;AACzB,QAAM,IAAE,GAAG,IAAI,GAAJ,EAAX;AACA,QAAE,CAAC,GAAH,CAAO,SAAP,EAAkB,EAAlB;AAEA,UAAM,CAAC,OAAP,CAAe,aAAC;;;AACZ,UAAM,GAAG,GAAG,OAAC,SAAD,KAAC,WAAD,GAAC,MAAD,IAAC,CAAE,MAAH,MAAS,IAAT,IAAS,aAAT,GAAS,MAAT,GAAS,GAAG,KAAH,CAArB;AACA,UAAI,CAAC,IAAE,CAAC,GAAH,CAAO,GAAP,CAAL,EACE,IAAE,CAAC,GAAH,CAAO,GAAP,EAAY,EAAZ;AACF,gBAAE,CAAC,GAAH,CAAO,GAAP,OAAW,IAAX,IAAW,aAAX,GAAW,MAAX,GAAW,GAAE,IAAF,CAAO,CAAP,CAAX,CAJY,CAIU;AACvB,KALH;AAQA,QAAI,EAAE,UAAE,CAAC,GAAH,CAAO,SAAP,OAAiB,IAAjB,IAAiB,aAAjB,GAAiB,MAAjB,GAAiB,GAAE,MAArB,CAAJ,EACE,IAAE,UAAF,CAAU,SAAV;AAEF,UAAM,CAAC,IAAP,CAAW,KAAX,SAAM,qHAAS,qHAAI,IAAJ,GAAQ,GAAR,CAAY,UAAC,EAAD,EAAe;UAAd,gE;UAAC,IAAI,Q;UAAE,MAAM,Q;;AAAQ,aAAO;AAAE,YAAI,MAAN;AAAQ,cAAM;AAAd,OAAP;AAAyB,KAA3D,CAAT,EAAN;AACD,GAhBD,MAiBK;AACH,UAAM,CAAC,IAAP,CAAY;AAAE,YAAM;AAAR,KAAZ,EADG,CACqB;AACzB;;AAED,SAAO,MAAP;AACD;;AAGD,SAAS,iBAAT,CAA2B,GAA3B,EAA6C,OAA7C,EAAqE,GAArE,EAAoF,MAApF,EAAkH;AAEhH,MAAM,WAAW,GAAG,SAAd,WAAc,CAAC,SAAD,EAAoB,YAApB,EAAyC;AAC3D,QAAM,IAAI,GAAG,YAAY,GAAG,GAAG,CAAC,KAAJ,CAAU,QAAb,GAAwB,GAAG,CAAC,KAAJ,CAAU,KAA3D;AACA,WAAO,OAAO,CAAC,aAAR,GAAwB;AAC7B,UAAI,EAAE,mDAAG,CAAC,IAAI,CAAC,IAAN,EAAY,MAAM,CAAC,SAAD,CAAlB,CADoB;AAE7B,WAAK,EAAE,eAAC,CAAD,EAAU;AAAK,kEAAG,CAAC,IAAI,CAAC,KAAN,EAAa,MAAM,CAAtB,SAAsB,CAAnB,CAAH;AAAkC;AAF3B,KAAxB,GAGH;AACF,UAAI,EAAE,mDAAG,CAAC,IAAI,CAAC,IAAN,EAAY,MAAM,CAAC,CAAD,CAAlB,CADP;AAEF,WAAK,EAAE,eAAC,CAAD,EAAU;AAAK,kEAAG,CAAC,IAAI,CAAC,KAAN,EAAa,MAAM,CAAC,CAAC,GAAxB,CAAsB,CAAnB,CAAH;AAA8B;AAFlD,KAHJ;AAOD,GATD;;AAWA,MAAI,SAAS,GAAG,CAAhB;AAEA,MAAM,UAAU,GAAG,GAAG,CAAC,GAAJ,CAAQ,aAAC;AAC1B,WAAO;AACL,WAAK,EAAE,CAAC,CAAC,IAAF,GAAS,GAAG,CAAC,KAAD,EAAQ;AAAE,WAAG,EAAE,aAAW,CAAC,CAAC,IAApB;AAA4B,iBAAS,EAAE,GAAG,CAAC,KAAJ,CAAU;AAAjD,OAAR,EAAuE,CAAC,CAAC,IAAzE,CAAZ,GAA6F,SAD/F;AAEL,YAAM,EAAE,CAAC,CAAC,MAAF,CAAS,GAAT,CAAa,aAAC;AAAI,2BAAY,CAAC,CAAD,EAAI,OAAJ,EAAa,GAAb,EAAkB,WAAW,CAAC,SAAS,EAAV,EAAc,CAAC,CAAE,CAAC,CAA3D,MAAyC,CAA7B,CAAZ;AAAoE,OAAtF;AAFH,KAAP;AAID,GALkB,CAAnB;AAQA,SAAO,UAAP;AACD;;AAGD,SAAS,YAAT,CAAsB,CAAtB,EAAiC,CAAjC,EAA4C,SAA5C,EAAiE,IAAjE,EAA+E;AAC7E,MAAI,CAAC,IAAI,IAAL,IAAa,CAAC,IAAI,IAAtB,EAA4B,OAAO,CAAP;AAC5B,MAAI,CAAC,IAAI,IAAT,EAAe,OAAO,SAAS,GAAG,CAAC,CAAJ,GAAQ,CAAxB;AACf,MAAI,CAAC,IAAI,IAAT,EAAe,OAAO,SAAS,GAAG,CAAH,GAAO,CAAC,CAAxB;AAEf,SAAO,IAAI,GAAI,CAAC,GAAG,CAAR,GAAc,CAAC,GAAG,CAA7B;AACD;;AAED,SAAS,YAAT,CAAsB,CAAtB,EAAiC,CAAjC,EAA4C,SAA5C,EAAiE,IAAjE,EAA+E;AAC7E,MAAI,CAAC,IAAI,IAAL,IAAa,CAAC,IAAI,IAAtB,EAA4B,OAAO,CAAP;AAC5B,MAAI,CAAC,IAAI,IAAT,EAAe,OAAO,SAAS,GAAG,CAAC,CAAJ,GAAQ,CAAxB;AACf,MAAI,CAAC,IAAI,IAAT,EAAe,OAAO,SAAS,GAAG,CAAH,GAAO,CAAC,CAAxB;;AAEf,MAAI,IAAJ,EAAU;AACR,QAAI,CAAC,GAAG,CAAR,EAAW,OAAO,CAAC,CAAR;AACX,QAAI,CAAC,GAAG,CAAR,EAAW,OAAO,CAAP;AACZ,GAHD,MAGO;AACL,QAAI,CAAC,GAAG,CAAR,EAAW,OAAO,CAAC,CAAR;AACX,QAAI,CAAC,GAAG,CAAR,EAAW,OAAO,CAAP;AACZ;;AACD,SAAO,CAAP;AACD;;AAED,SAAS,SAAT,CAAmB,MAAnB,EAAsC,OAAtC,EAA4D;AAElD,UAAI,GAAK,OAAO,CAAZ,IAAJ;AAER,MAAI,EAAE,IAAI,CAAC,KAAL,IAAc,IAAI,CAAC,KAAL,CAAW,MAA3B,CAAJ,EAAwC,OAAO,SAAP;AAExC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAP,CAAY,aAAC;AAAI,YAAC,CAAC,IAAF,IAAU,IAAI,CAAd;AAAoB,GAArC,CAAd;AACA,MAAI,CAAC,KAAL,EAAY,OAAO,SAAP;AAEZ,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAN,CAAa,OAAb,GAAuB,GAAvB,CAA2B,UAAC,CAAD,EAAI,CAAJ,EAAK;AAC/C,WAAO;AAAE,OAAC,EAAG,CAAC,IAAI,CAAL,IAAU,IAAI,CAAC,QAAhB,GAA4B,IAA5B,GAAmC,CAAxC;AAA2C,OAAC;AAA5C,KAAP;AACD,GAFgB,CAAjB;AAIA,MAAI,KAAK,CAAC,IAAN,IAAc,uDAAS,CAAC,MAA5B,EACE,QAAQ,CAAC,IAAT,CAAc,UAAC,CAAD,EAAI,CAAJ,EAAK;AAAK,uBAAY,CAAC,CAAC,CAAC,CAAH,EAAM,CAAC,CAAC,CAAR,EAAW,IAAI,CAAC,SAAhB,EAA2B,IAAI,CAA3C,IAAY,CAAZ;AAAiD,GAAzE,EADF,KAGE,QAAQ,CAAC,IAAT,CAAc,UAAC,CAAD,EAAI,CAAJ,EAAK;AAAK,uBAAY,CAAC,CAAC,CAAC,CAAH,EAAM,CAAC,CAAC,CAAR,EAAW,IAAI,CAAC,SAAhB,EAA2B,IAAI,CAA3C,IAAY,CAAZ;AAAiD,GAAzE;AAEF,SAAO,QAAQ,CAAC,GAAT,CAAa,aAAC;AAAI,YAAC,CAAD;AAAG,GAArB,CAAP;AACD;;AAED,SAAS,aAAT,CAAuB,GAAvB,EAAoC,IAApC,EAAgD;AAC9C,MAAM,EAAE,GAAG,6BAAX;AAEA,MAAM,KAAK,GAAG,GAAG,CAAC,KAAJ,CAAU,GAAV,EAAe,GAAf,CAAmB,aAAC;AAChC,QAAM,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,EAAR,CAAV;AACA,QAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAD,CAAD,IAAQ,EAAb,GAAkB,CAAC,CAAC,CAAD,CAAnB,GAAyB,SAAnC;AACA,QAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAD,CAAD,IAAQ,EAAb,GAAkB,MAAM,CAAC,QAAP,CAAgB,CAAC,CAAC,CAAD,CAAjB,CAAlB,GAA0C,CAApD;AAEA,WAAO;AAAC,OAAC,GAAF;AAAI,OAAC;AAAL,KAAP;AACD,GANa,CAAd;AAQA,MAAM,GAAG,GAAG,KAAK,CAAC,MAAlB;;AAEA,MAAI,GAAG,IAAI,GAAG,GAAG,IAAjB,EAAuB;AACrB,SAAK,CAAC,MAAN,GAAe,IAAf;AACA,SAAK,CAAC,IAAN,CAAW,KAAK,CAAC,GAAG,GAAG,CAAP,CAAhB,EAA2B,GAA3B;AACD;;AAED,SAAO,KAAP;AACD,C,CAED;;;AACA,SAAS,gBAAT,CAA0B,MAA1B,EAA2C;;;AACzC,SAAO,IAAI,CAAC,GAAL,CAAS,MAAM,CAAC,MAAhB,EAAwB,aAAM,SAAN,UAAM,WAAN,GAAM,MAAN,SAAM,CAAG,CAAH,CAAN,CAAY,MAAZ,CAAmB,MAAnB,IAA4B,CAA5B,MAA6B,IAA7B,IAA6B,aAA7B,GAA6B,EAA7B,GAAiC,CAAzD,CAAP;AACD;;AAGD,SAAS,YAAT,CAAsB,IAAtB,EAAgD,OAAhD,EAA+D;AAC7D,MAAI,EAAE,IAAI,IAAI,IAAI,CAAC,MAAf,CAAJ,EACE,OAAO,EAAP;AAEF,SAAO,aAAa,CAAC,IAAD,EAAO,OAAP,CAApB;AACD;;AAEK,SAAU,MAAV,CAAiB,EAAjB,EAA4E;;;MAAzD,IAAI,U;MAAE,OAAO,a;MAAE,MAAM,Y;MAAE,KAAK,W;AACnD,MAAM,QAAQ,GAAG,EAAE,IAAI,CAAC,MAAL,IAAe,IAAI,CAAC,MAAL,CAAY,MAA3B,KAAqC,gBAAI,CAAC,MAAL,CAAY,CAAZ,OAAc,IAAd,IAAc,aAAd,GAAc,MAAd,GAAc,GAAE,MAAhB,MAAsB,IAAtB,IAAsB,aAAtB,GAAsB,MAAtB,GAAsB,GAAE,MAA7D,CAAF,CAAjB;AAEA,MAAM,KAAK,GAAkB,qDAAS,GAAG,6DAAS,EAAZ,GAAiB,SAAvD;AAEA,MAAI,QAAJ,EACE,OAAO,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,SAAd,CAAV;AAEF,MAAM,EAAE,GAAG,IAAI,CAAC,MAAL,CAAY,CAAZ,CAAX;AACA,MAAM,MAAM,GAAG,EAAE,CAAC,MAAlB;AACA,MAAM,KAAK,GAAG,4DAAY,CAAC,CAAC,CAAE,OAAO,CAAC,aAAZ,CAA1B;AAEA,MAAM,OAAO,GAAG,gBAAgB,CAAC,MAAD,CAAhC;AACA,MAAM,QAAQ,GAAG,YAAY,CAAC,OAAO,CAAC,cAAT,EAAyB,OAAzB,CAA7B;AAEA,MAAI,SAAJ;;AAEA,MAAI,uDAAS,CAAC,mBAAV,IAAiC,OAAO,CAAC,cAAzC,IAA2D,OAAO,CAAC,UAAvE,EAAmF;AACjF,QAAI;AACF,UAAM,GAAC,GAAG,QAAQ,CAAC,OAAD,EAAU,OAAV,EAAmB,SAAnB,EAA8B,KAA9B,EAAqC,OAAO,CAAC,UAA7C,CAAlB;;AACA,eAAS,GAAG,mBAAC,KAAD,EAAQ,KAAR,EAAe,OAAf,EAAsB;AAAK,kBAAC,CAAC,KAAD,EAAQ,KAAR,EAAa;AAAI,YAAE;AAAN,WAAW,OAAX,CAAb,EAAmC;AAAE,gBAAM,EAA5C;AAAoC,SAAnC,CAAD;AAA+C,OAAtF;AACD,KAHD,CAIA,OAAO,CAAP,EAAU;AACR,aAAO,CAAC,GAAR,CAAY,6BAAZ,EAA2C,CAA3C;AACD;AACF;;AAED,MAAM,GAAG,GAAa;AACpB,aAAS,WADW;AAEpB,MAAE,IAFkB;AAGpB,SAAK,OAHe;AAIpB,SAAK,EAAE,SAAS,CAAC,MAAD,EAAS,OAAT,CAJI;AAKpB,SAAK;AALe,GAAtB;AAQA,MAAM,MAAM,GAAG,gBAAgB,CAAC,MAAD,EAAS,OAAT,CAA/B;AACA,MAAM,UAAU,GAAG,iBAAiB,CAAC,MAAD,EAAS,OAAT,EAAkB,GAAlB,EAAuB,QAAQ,CAAC,GAAT,CAAa,aAAC;AAAI,YAAC,CAAD;AAAG,GAArB,CAAvB,CAApC;AAEA,SAAO,GAAG,CAAC,OAAO,CAAC,aAAR,GAAwB,2CAAxB,GAAgC,2CAAjC,EAAwC;AAChD,aAAS,EAAE,mDAAG,kQACY,+BADZ,EAEc,sDAFd,KACO,KADP,EAEQ,MAFR,CADkC;AAMhD,UAAM,EAAE,UANwC;AAOhD,SAAK,EAAE,QAAQ,CAAC,MAAT,GAAkB,QAAQ,CAAC,GAAT,CAAa,aAAC;AAAI,cAAC,CAAD;AAAG,KAArB,CAAlB,GAA2C;AAPF,GAAxC,CAAV;AASD;AAAA;;;;;;;;;;;;ACrVD,2D;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./module.ts\");\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import React from 'react';\r\n\r\nexport interface GridField {\r\n    values: React.ReactElement[];\r\n}\r\n\r\nexport interface GridGroup {\r\n    label?: React.ReactElement;\r\n    fields: GridField[];\r\n}\r\n\r\nexport interface GridProps {\r\n    className?: string;\r\n\r\n    colws?: number[];\r\n    rowhs?: number[];\r\n\r\n    groups: GridGroup[];\r\n}\r\n\r\nfunction calc_sizes(spec: number[] | undefined, n: number, defsize: string) {\r\n    const sizes = Array(n).fill(defsize);\r\n\r\n    if (! (spec && spec.length)) return sizes;\r\n\r\n    for (var i = 0; i < n; i++) {\r\n        const v = spec[i];\r\n        if (v && v > 0)\r\n            sizes[i] = `${v}px`;\r\n    }\r\n\r\n    return sizes;\r\n}\r\n\r\nexport function VGrid(props: GridProps) {\r\n    const groups = props.groups;\r\n\r\n    const cells: React.ReactNode[] = [];\r\n    const ncols = groups.find(g => g.fields.length)?.fields[0].values.length ?? 0;\r\n    let nrows = 0;\r\n\r\n    groups.forEach(g => {\r\n        // NOTE: justify-self is for the [likely to be used] sticky to work\r\n        if (g.label) {\r\n            const new_style = {...g.label.props?.style, 'grid-column': `1 / span ${ncols}`, 'justify-self': 'start'}\r\n            cells.push(React.cloneElement(g.label, {style: new_style}));\r\n            nrows += 1;\r\n        }\r\n        g.fields.forEach(f => cells.push(...f.values))\r\n        nrows += g.fields.length;\r\n    })\r\n\r\n    // TODO: investigate the minmax etc\r\n    const gtcs = calc_sizes(props.colws, ncols, 'minmax(max-content, 1fr)')\r\n    const gtrs = calc_sizes(props.rowhs, nrows, 'max-content')\r\n\r\n    const style = {\r\n        'display': 'grid',\r\n        'grid-template-columns': gtcs.join(' '),\r\n        'grid-template-rows': gtrs.join(' '),\r\n    }\r\n\r\n    return React.createElement('div', { style, className: props.className }, cells);\r\n}\r\n\r\n\r\nexport function HGrid(props: GridProps) {\r\n    const groups = props.groups;\r\n\r\n    const cells: React.ReactNode[] = [];\r\n\r\n    const any_labels = groups.find(g => g.label);\r\n    let nrows = groups.find(g => g.fields.length)?.fields[0].values.length ?? 0;\r\n\r\n    // fixed layout all the groups label first, then let the    grid autolayout fields\r\n    if (any_labels) {\r\n        nrows += 1;\r\n        let col1 = 1;\r\n\r\n        groups.forEach(g => {\r\n            const new_style = {\r\n                'grid-row' : '1 / 2',\r\n                'grid-column' : `${col1} / span ${g.fields.length}`\r\n            };\r\n            const cell = g.label ? React.cloneElement(g.label, {style: {...g.label.props?.style, ...new_style}})\r\n                                 : React.createElement('div', {style: new_style});\r\n            cells.push(cell);\r\n            col1 += g.fields.length;\r\n        })\r\n    }\r\n\r\n    // TODO: some flatmap should be faster\r\n    let ncols = 0;  // this is needed for the widths only\r\n\r\n    groups.forEach(g => {\r\n        g.fields.forEach(f => {cells.push(...f.values)})\r\n        ncols += g.fields.length;\r\n    })\r\n\r\n    // minmax(max-content, 1fr)\r\n    const gtcs = calc_sizes(props.colws, ncols, 'auto');\r\n    const gtrs = calc_sizes(props.rowhs, nrows, 'max-content');\r\n\r\n    const style = {\r\n        'display': 'grid',\r\n        'grid-template-columns': gtcs.join(' '),\r\n        'grid-template-rows': gtrs.join(' '),\r\n        'grid-auto-flow': 'column',\r\n    }\r\n\r\n    return React.createElement('div', { style, className: props.className }, cells);\r\n}","import React from 'react';\n\nimport { FieldOverrideContext, getFieldDisplayName, Labels, PanelPlugin} from '@grafana/data';\nimport { CodeEditor, CodeEditorSuggestionItem, CodeEditorSuggestionItemKind} from '@grafana/ui';\nimport { VTable, VTableOptions } from './vtable';\n\nimport {config as gf_config} from \"@grafana/runtime\"\n\ninterface CustomFieldConfig {\n    display_mode: string;\n}\n\nconst suggestions: CodeEditorSuggestionItem[] = [\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'value' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'value.raw' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'value.text' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'value.style' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'value.html' },\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'field' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'field.name' },\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'lib' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'lib.moment' },\n    { kind: CodeEditorSuggestionItemKind.Field, label: 'context' },\n    { kind: CodeEditorSuggestionItemKind.Property, label: 'context.df' },\n]\n\nconst DEF_CODE = `\n/*\n    This code would be called for formatting each value.\n    The object 'value' is in scope for modification.\n\n    Set the text:\n      value.text = 'foo'\n    Set the style:\n      value.style = {'color': 'red', 'border': '1px solid'}\n    Render as html instead of text:\n      value.html = '<a href=\"http://www.grafana.com\">Go to base</a>'\n    Get raw (numeric) value:\n      let a = value.raw\n\n    Extra objects are in scope to help the formatting:\n      field: dataframe field of this value. The field.name is most useful here.\n      context.df: whole dataframe\n      lib.moment: moment.js library, handy for the datetimes.\n*/\n\nvalue.text = field.name + ':' + value.raw\nvalue.style = {'color': 'red'}`;\n\nfunction JsEditor({ value, onChange } : {value: string, onChange: (s: string) => void}) {\n    return React.createElement(CodeEditor,\n        {\n            value,\n            onBlur: onChange,\n            onSave: onChange,\n            language: 'javascript',\n            showMiniMap: false,\n            showLineNumbers: true,\n            getSuggestions: () => suggestions,\n            height: 400,\n            // width:'100%',\n\n        });\n}\n\nconst fetch_groups = async (context: FieldOverrideContext) => {\n    const options = [{ value: '', label: '─' }]\n    if (context && context.data && context.data.length) {\n        const df = context.data[0];\n        const labels: string[] = []\n        df.fields.filter(f => f.labels).forEach((f) =>\n            Object.entries(f.labels as Labels).forEach(([k, v]) => {\n                if (k != undefined && v != undefined && !labels.includes(k))\n                    labels.push(k)\n            })\n        )\n        labels.forEach(l => options.push({ label: l, value: l }))\n    }\n    return Promise.resolve(options);\n}\n\nconst fetch_fields = async (context: FieldOverrideContext) => {\n    const options = [{ value: '', label: '─' }]\n    if (context && context.data && context.data.length) {\n        const df = context.data[0];\n        df.fields.forEach(\n            f => {\n                const label = getFieldDisplayName(f, df)\n                options.push({ label: label != f.name ? `${label} (${f.name})` : f.name, value: f.name })\n            })\n    }\n    return Promise.resolve(options);\n}\n\nexport const plugin = new PanelPlugin<VTableOptions, CustomFieldConfig>(VTable)\n\nplugin.setPanelOptions((builder) => {\n    builder\n        .addSelect({\n            path: 'dimension_field',\n            name: 'Dimension field name',\n            settings: {\n                allowCustomValue: true,\n                options: [],\n                getOptions: fetch_fields,\n            },\n            defaultValue: '',\n        })\n        .addBooleanSwitch({\n            path: 'is_horizontal',\n            name: 'Horizontal layout ',\n            defaultValue: false,\n        })\n        .addBooleanSwitch({\n            path: 'show_common_unit',\n            name: 'Show common unit',\n            defaultValue: true,\n        })\n        .addSelect({\n            path: 'group_by_label',\n            name: 'Group by label',\n            settings: {\n                allowCustomValue: true,\n                options: [],\n                getOptions: fetch_groups,\n            },\n            defaultValue: '',\n        })\n        .addTextInput({\n            path: 'custom_columns',\n            name: 'Custom column widths and text alignments',\n            description: 'Comma-separated format string: r100, c200, l300, etc'\n        })\n        .addSelect({\n            path: 'sort.field',\n            name: 'By field',\n            settings: {\n                allowCustomValue: true,\n                options: [],\n                getOptions: fetch_fields,\n            },\n            defaultValue: '',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'sort.desc',\n            name: 'Descending',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'sort.zeronull',\n            name: 'Treat zeros as nulls',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'sort.nullfirst',\n            name: 'Nulls go first',\n            category: ['Sort'],\n        })\n        .addBooleanSwitch({\n            path: 'use_formatcode',\n            name: 'Use formatting code (DANGER!)',\n            description: gf_config.disableSanitizeHtml ? \"\" : \"Feature is disabled. Set disable_sanitize_html = false in Grafana config to activate it.\",\n            category: ['Custom formatting'],\n            defaultValue: false,\n        })\n        .addCustomEditor({\n            id: 'formatcode',\n            path: 'formatcode',\n            name: 'Code',\n            showIf: (options) => options.use_formatcode && gf_config.disableSanitizeHtml,\n            category: ['Custom formatting'],\n            editor: JsEditor,\n            defaultValue: DEF_CODE,\n        })\n})\n\nplugin.useFieldConfig({\n    useCustomConfig: (builder) => {\n        builder\n            .addRadio({\n                path: 'display_mode',\n                name: 'Cell display mode',\n                settings: {\n                    options: [\n                        { value: 'auto', label: 'Auto' },\n                        { value: 'fg', label: 'Color text' },\n                        { value: 'bg', label: 'Color background' },\n                    ],\n                },\n                defaultValue: 'auto'\n            })\n    }\n})","import { GrafanaTheme } from '@grafana/data';\r\nimport { useTheme } from '@grafana/ui';\r\nimport { css } from 'emotion';\r\n\r\nexport const alignstyles : {[key: string]: string}= {\r\n    l: css`text-align: left;`,\r\n    c: css`text-align: center;`,\r\n    r: css`text-align: right;`,\r\n}\r\n\r\nexport interface GridStyle {\r\n    field: {\r\n        name: string;\r\n        value: string;\r\n    },\r\n    dimfield: {\r\n        name: string;\r\n        value: string;\r\n    },\r\n    grouplabel: string;\r\n}\r\n\r\ninterface Theme {\r\n    dim: string;\r\n    hl: string;\r\n    sticky_bg: string\r\n    border_bg: string;\r\n}\r\n\r\nlet styles:{h: GridStyle, v: GridStyle}|undefined = undefined;\r\nlet gtheme: GrafanaTheme;\r\n\r\nexport function useGridStyle(is_horizontal: boolean): GridStyle {\r\n    const gft = useTheme();\r\n\r\n    // cache\r\n    if (! styles || gtheme != gft) {\r\n        const theme : Theme = {\r\n            dim: gft.colors.textWeak,\r\n            hl: gft.colors.textBlue,\r\n            sticky_bg: gft.colors.panelBg,\r\n            border_bg: gft.colors.border1,\r\n        }\r\n        styles = build_styles(theme);\r\n        gtheme = gft;\r\n\r\n        console.log('building styles');\r\n    }\r\n\r\n    return is_horizontal ? styles.h : styles.v;\r\n}\r\n\r\nfunction build_styles(theme: Theme): {h: GridStyle, v: GridStyle} {\r\n\r\n    const cell = css`\r\n        padding: 8px;\r\n        white-space: nowrap;\r\n    `;\r\n    const bborder = css`\r\n        border-bottom: 1px solid ${theme.border_bg};\r\n    `;\r\n    const rborder = css`\r\n        border-right: 1px solid ${theme.border_bg};\r\n    `;\r\n    const sticky = css`\r\n        position: sticky;\r\n        background-color: ${theme.sticky_bg};\r\n    `;\r\n\r\n    const v = {\r\n        field: {\r\n            name: css(cell, sticky, bborder, css`\r\n                left: 0;\r\n                z-index: 2;\r\n                color: ${theme.dim};\r\n            `),\r\n            value: css(cell, bborder, css`\r\n                text-align: right;\r\n            `),\r\n        },\r\n        dimfield: {\r\n            name: css(cell, sticky, css`\r\n                left: 0;\r\n                top: 0;\r\n                z-index: 3;\r\n\r\n                color: ${theme.dim};\r\n            `),\r\n            value: css(cell, sticky, css`\r\n                top: 0;\r\n                z-index: 1;\r\n\r\n                color: ${theme.hl};\r\n\r\n                text-align: right;\r\n            `),\r\n        },\r\n        grouplabel: css(sticky, css`\r\n            left: 0;\r\n            z-index: 2;\r\n\r\n            padding: 16px 8px 0 4px;\r\n            color: ${theme.hl};\r\n        `),\r\n    }\r\n\r\n    const h = {\r\n        field: {\r\n            name: css(cell, sticky, css`\r\n                top: 0;\r\n                z-index: 1;\r\n\r\n                color: ${theme.hl};\r\n\r\n                text-align: right;\r\n                white-space: normal;\r\n            `),\r\n            value: css(cell, bborder, css`\r\n                text-align: right;\r\n            `),\r\n        },\r\n        dimfield: {\r\n            name: css(cell, sticky, css`\r\n                left: 0;\r\n                top: 0;\r\n                z-index: 3;\r\n\r\n                color: ${theme.hl};\r\n\r\n                text-align: right;\r\n                white-space: normal;\r\n            `),\r\n            value: css(cell, sticky, bborder, css`\r\n                left: 0;\r\n                z-index: 2;\r\n\r\n                color: ${theme.dim};\r\n                text-align: right;\r\n            `),\r\n        },\r\n        grouplabel: css(cell, sticky, css`\r\n            top: 0;\r\n            color: ${theme.hl};\r\n\r\n            text-align: center;\r\n\r\n            white-space: normal;\r\n        `)\r\n    }\r\n\r\n    return {h, v};\r\n}","import React from 'react';\nimport moment from 'moment';\n\nimport { css } from 'emotion';\nimport { PanelProps, getFieldDisplayName, getDisplayProcessor, Field as DfField, DataFrame, FieldType, GrafanaTheme2 } from '@grafana/data';\nimport { getTextColorForBackground, useTheme2 } from '@grafana/ui';\n\nimport {config as gf_config} from \"@grafana/runtime\"\n\nimport { VGrid, HGrid, GridField, GridGroup } from './grid';\nimport { useGridStyle, GridStyle} from './styles'\n\nvar rce = React.createElement;\n\nexport interface VTableOptions {\n  custom_columns?: string;\n  dimension_field?: string;\n  is_horizontal?: boolean;\n  show_common_unit?: boolean;\n  group_by_label?: string;\n  use_formatcode?: boolean;\n  formatcode?: string;\n  sort: {\n    field?: string;\n    zeronull?: boolean;\n    nullfirst?: boolean;\n    desc?: boolean;\n  }\n}\n\ninterface FieldStyle {\n  name: string;\n  value: (i: number) => string;\n}\n\ntype Formatter = (value: ValueSpec, field: DfField, context: any) => void;\n\ninterface FieldCtx {\n  df: DataFrame,\n  formatter?: Formatter,\n  style: GridStyle;\n  order?: number[],\n  theme: GrafanaTheme2;\n}\n\ninterface ValueSpec {\n    raw: any,\n    i: number,\n    text: string;\n    style: {},\n    html: string | undefined,\n}\n\nfunction colorize_cell(mode: string | undefined, color: string | undefined) {\n  if (!color) return {};\n  if (mode == 'fg') return { 'color': color };\n  if (mode == 'bg') return { 'background': color, 'color': getTextColorForBackground(color) };\n  return {};\n}\n\nfunction create_field(field: DfField, options: VTableOptions, ctx: FieldCtx, style: FieldStyle): GridField {\n  const { df, formatter, order } = ctx;\n  const field_name = getFieldDisplayName(field, df);\n\n  if (!field.display)\n    field.display = getDisplayProcessor({ field, theme: ctx.theme });\n\n  let common_unit = undefined;\n\n  // try to render the field with the sample input == 1 to obtain the unit.\n  // probing with 0 may be wrong since it may be special.\n  // mappings are detached while probing and reattached later.\n  // this is done only if field is numeric\n  if (options.show_common_unit && field.type == FieldType.number) {\n    const saved_mappings = field.config.mappings;\n    field.config.mappings = undefined;\n    common_unit = getDisplayProcessor({ field, theme:ctx.theme })(1).suffix;\n    field.config.mappings = saved_mappings;\n  }\n\n  const namecell = rce(\n    'div',\n    {\n      key: field.name,\n      className: style.name,\n    },\n    common_unit ? `${field_name}, ${common_unit}` : field_name\n  );\n\n  const cells = [namecell];\n\n  // the index loop here instead of map is for easily attaching the sorting feature\n  // should it be needed someday\n  for (var i = 0; i < field.values.length; i++) {\n\n    const key = `${field.name}.${i}`\n\n    let v = field.values.get(order ? order[i] : i);\n    if (v == null)\n      v = undefined;\n\n    const dv = field.display(v);\n    const spec: ValueSpec = {\n      raw: v,\n      i,\n      text: options.show_common_unit ? dv.text : `${dv.prefix ?? ''}${dv.text}${dv.suffix ?? ''}`,\n      style: colorize_cell(field.config.custom?.display_mode, dv.color),\n      html: undefined,\n    }\n\n    if (formatter) {\n      try { formatter(spec, field, {}) }\n      catch (e) { }\n    }\n\n    let cell;\n\n    if (spec?.html) {\n      cell = rce(\n        'div',\n        {\n          key,\n          style: spec.style,\n          className: style.value(i),\n          dangerouslySetInnerHTML: { __html: spec.html },\n        });\n    }\n    else {\n      cell = rce(\n        'div',\n        {\n          key,\n          style: spec.style,\n          className: style.value(i),\n        },\n        spec.text);\n    }\n\n    cells.push(cell);\n  }\n\n  return { values: cells }\n}\n\ninterface GroupSpec {\n  name?: string;\n  fields: DfField[];\n  is_dim?: boolean;\n}\n\n\nfunction fields_to_groups(fields: DfField[], options: VTableOptions): GroupSpec[] {\n  const { dimension_field: dim, group_by_label: label } = options;\n\n  const groups: GroupSpec[] = [];\n\n  if (dim && dim.length) {\n    const dimfield = fields.find(f => f.name == dim);\n    if (dimfield) {\n      groups.push({ fields: [dimfield], is_dim: true })\n      fields = fields.filter(f => f != dimfield);\n    }\n  }\n\n  if (label && label.length) {\n    const gm = new Map<string | undefined, DfField[]>();\n    gm.set(undefined, []);\n\n    fields.forEach(f => {\n        const lab = f?.labels?.[label];\n        if (!gm.has(lab))\n          gm.set(lab, [])\n        gm.get(lab)?.push(f)  // '?' just to calm down the linter\n      }\n    );\n\n    if (! gm.get(undefined)?.length)\n      gm.delete(undefined);\n\n    groups.push(...[...gm].map(([name, fields]) => { return { name, fields } }))\n  }\n  else {\n    groups.push({ fields }) // shortcut if no grouping\n  }\n\n  return groups;\n}\n\n\nfunction create_gridgroups(gss: GroupSpec[], options: VTableOptions, ctx: FieldCtx, aligns: (string | undefined)[]): GridGroup[] {\n\n  const field_style = (field_idx: number, is_dimension: boolean) => {\n    const base = is_dimension ? ctx.style.dimfield : ctx.style.field;\n    return options.is_horizontal ? {\n      name: css(base.name, aligns[field_idx]),\n      value: (i: number) => css(base.value, aligns[field_idx]),\n    } : {\n      name: css(base.name, aligns[0]),\n      value: (i: number) => css(base.value, aligns[i + 1]),\n    }\n  }\n\n  var field_idx = 0;\n\n  const gridgroups = gss.map(g => {\n    return {\n      label: g.name ? rce('div', { key: `__group.${g.name}`, className: ctx.style.grouplabel }, g.name) : undefined,\n      fields: g.fields.map(f => create_field(f, options, ctx, field_style(field_idx++, !! g.is_dim)))\n    }\n  }\n  )\n\n  return gridgroups;\n}\n\n\nfunction num_comparer(a: number, b: number, nullfirst?: boolean, desc?: boolean): number {\n  if (a == null && b == null) return 0;\n  if (a == null) return nullfirst ? -1 : 1;\n  if (b == null) return nullfirst ? 1 : -1;\n\n  return desc ? (b - a) : (a - b);\n}\n\nfunction str_comparer(a: string, b: string, nullfirst?: boolean, desc?: boolean): number {\n  if (a == null && b == null) return 0;\n  if (a == null) return nullfirst ? -1 : 1;\n  if (b == null) return nullfirst ? 1 : -1;\n\n  if (desc) {\n    if (a > b) return -1;\n    if (a < b) return 1;\n  } else {\n    if (a < b) return -1;\n    if (a > b) return 1;\n  }\n  return 0;\n}\n\nfunction get_order(fields: DfField[], options: VTableOptions): number[] | undefined {\n\n  const { sort } = options;\n\n  if (!(sort.field && sort.field.length)) return undefined;\n\n  const field = fields.find(f => f.name == sort.field);\n  if (!field) return undefined;\n\n  const ordermap = field.values.toArray().map((v, i) => {\n    return { v: (v == 0 && sort.zeronull) ? null : v, i }\n  });\n\n  if (field.type == FieldType.number)\n    ordermap.sort((a, b) => num_comparer(a.v, b.v, sort.nullfirst, sort.desc));\n  else\n    ordermap.sort((a, b) => str_comparer(a.v, b.v, sort.nullfirst, sort.desc));\n\n  return ordermap.map(v => v.i);\n}\n\nfunction parse_colspec(str: string, size: number): { a: string | undefined, w: number }[] {\n  const re = /\\s*([r|c|l]?)\\s*([0-9]*)\\s*/;\n\n  const specs = str.split(',').map(f => {\n    const m = f.match(re);\n    const a = m && m[1] != '' ? m[1] : undefined;\n    const w = m && m[2] != '' ? Number.parseInt(m[2]) : 0;\n\n    return {a, w}\n  });\n\n  const len = specs.length;\n\n  if (len && len < size) {\n    specs.length = size;\n    specs.fill(specs[len - 1], len);\n  }\n\n  return specs;\n}\n\n// this returns the maximum of rows or columns regardless of the orientation\nfunction estimate_maxcols(fields: DfField[]) {\n  return Math.max(fields.length, fields?.[0].values.length + 1 ?? 1);\n}\n\n\nfunction get_colspecs(spec: string | undefined, maxcols: number) {\n  if (!(spec && spec.length))\n    return [];\n\n  return parse_colspec(spec, maxcols);\n}\n\nexport function VTable({ data, options, height, width }: PanelProps<VTableOptions>) {\n  const is_empty = !(data.series && data.series.length && data.series[0]?.fields?.length);\n\n  const theme: GrafanaTheme2 = useTheme2 ? useTheme2() : undefined as unknown as GrafanaTheme2;\n\n  if (is_empty)\n    return rce('div', null, 'No data');\n\n  const df = data.series[0];\n  const fields = df.fields;\n  const style = useGridStyle(!! options.is_horizontal);\n\n  const maxcols = estimate_maxcols(fields);\n  const colspecs = get_colspecs(options.custom_columns, maxcols);\n\n  let formatter: Formatter | undefined;\n\n  if (gf_config.disableSanitizeHtml && options.use_formatcode && options.formatcode) {\n    try {\n      const f = Function('value', 'field', 'context', 'lib', options.formatcode);\n      formatter = (value, field, context) => f(value, field, { df, ...context }, { moment })\n    }\n    catch (e) {\n      console.log('failed to compile formatter', e)\n    }\n  }\n\n  const ctx: FieldCtx = {\n    formatter,\n    df,\n    style,\n    order: get_order(fields, options),\n    theme,\n  }\n\n  const groups = fields_to_groups(fields, options);\n  const gridgroups = create_gridgroups(groups, options, ctx, colspecs.map(c => c.a));\n\n  return rce(options.is_horizontal ? HGrid : VGrid, {\n    className: css`\n                width: ${width}px;\n                height: ${height}px;\n                overflow: auto;\n              `,\n    groups: gridgroups,\n    colws: colspecs.length ? colspecs.map(c => c.w) : undefined,\n  })\n};","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_data__;","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_runtime__;","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_ui__;","module.exports = __WEBPACK_EXTERNAL_MODULE_emotion__;","module.exports = __WEBPACK_EXTERNAL_MODULE_moment__;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;"],"sourceRoot":""}